

##### æ‚¨è¯´ï¼š

x_train, x_test, y_train, y_test = train_test_split(li.data, li.target, test_size=0.25, random_state=1) print("è®­ç»ƒé›†ç‰¹å¾å€¼å’Œç›®æ ‡å€¼ï¼š", x_train, y_train) print("è®­ç»ƒé›†ç‰¹å¾å€¼shape", x_train.shape) print('-'*50)è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ä»€ä¹ˆ  print("æµ‹è¯•é›†ç‰¹å¾å€¼å’Œç›®æ ‡å€¼ï¼š", x_test, y_test) print("æµ‹è¯•é›†ç‰¹å¾å€¼shape", x_test.shape)



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ•°æ®é›†ï¼ˆ`li.data` ä¸ºç‰¹å¾å€¼ï¼Œ`li.target` ä¸ºç›®æ ‡å€¼ï¼‰**æŒ‰æ¯”ä¾‹åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†**ï¼Œå¹¶æ‰“å°åˆ’åˆ†åçš„æ•°æ®å†…å®¹åŠå…¶å½¢çŠ¶ã€‚ä¸‹é¢æ˜¯é€è¡Œè§£é‡Šï¼š

------

### 1ï¸âƒ£ æ•°æ®åˆ’åˆ†ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
x_train, x_test, y_train, y_test = train_test_split(li.data, li.target, test_size=0.25, random_state=1)
```

**å«ä¹‰ï¼š**

- `train_test_split` æ˜¯ sklearn ä¸­çš„å‡½æ•°ï¼Œç”¨æ¥**å°†åŸå§‹æ•°æ®é›†éšæœºåˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†**ã€‚
- `li.data`ï¼šæ ·æœ¬çš„ç‰¹å¾ï¼ˆäºŒç»´æ•°ç»„ï¼‰
- `li.target`ï¼šå¯¹åº”çš„æ ‡ç­¾ï¼ˆç›®æ ‡å€¼ï¼‰
- `test_size=0.25`ï¼šè¡¨ç¤º 25% çš„æ•°æ®ä½œä¸ºæµ‹è¯•é›†ï¼Œ75% ä½œä¸ºè®­ç»ƒé›†
- `random_state=1`ï¼šè®¾ç½®éšæœºç§å­ï¼Œä¿è¯æ¯æ¬¡åˆ’åˆ†çš„ç»“æœä¸€è‡´ï¼ˆå¯å¤ç°ï¼‰

------

### 2ï¸âƒ£ æ‰“å°è®­ç»ƒé›†å†…å®¹ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘print("è®­ç»ƒé›†ç‰¹å¾å€¼å’Œç›®æ ‡å€¼ï¼š", x_train, y_train)
print("è®­ç»ƒé›†ç‰¹å¾å€¼shape", x_train.shape)
```

**å«ä¹‰ï¼š**

- è¾“å‡ºåˆ’åˆ†å¾—åˆ°çš„è®­ç»ƒé›†ç‰¹å¾ï¼ˆ`x_train`ï¼‰å’Œç›®æ ‡å€¼ï¼ˆ`y_train`ï¼‰
- è¾“å‡ºè®­ç»ƒé›†ç‰¹å¾çš„ç»´åº¦ä¿¡æ¯ï¼ˆshapeï¼‰ï¼Œä¾‹å¦‚ `(112, 4)`ï¼Œè¡¨ç¤ºæœ‰112æ¡æ•°æ®ï¼Œæ¯æ¡æ•°æ®æœ‰4ä¸ªç‰¹å¾ã€‚

------

### 3ï¸âƒ£ åˆ†å‰²çº¿ï¼ˆç¾åŒ–è¾“å‡ºï¼‰ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
print('-'*50)
```

**ä½œç”¨ï¼š**

- æ‰“å°ä¸€æ¡ç”± 50 ä¸ª `-` ç»„æˆçš„åˆ†å‰²çº¿ï¼Œæ–¹ä¾¿åŒºåˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„è¾“å‡ºã€‚

------

### 4ï¸âƒ£ æ‰“å°æµ‹è¯•é›†å†…å®¹ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘print("æµ‹è¯•é›†ç‰¹å¾å€¼å’Œç›®æ ‡å€¼ï¼š", x_test, y_test)
print("æµ‹è¯•é›†ç‰¹å¾å€¼shape", x_test.shape)
```

**å«ä¹‰ï¼š**

- è¾“å‡ºåˆ’åˆ†å¾—åˆ°çš„æµ‹è¯•é›†ç‰¹å¾ï¼ˆ`x_test`ï¼‰å’Œç›®æ ‡å€¼ï¼ˆ`y_test`ï¼‰
- è¾“å‡ºæµ‹è¯•é›†ç‰¹å¾çš„ç»´åº¦ä¿¡æ¯ï¼ˆshapeï¼‰ï¼Œä¾‹å¦‚ `(38, 4)`ï¼Œè¡¨ç¤ºæœ‰38æ¡æµ‹è¯•æ•°æ®ã€‚

------

### ğŸ” æ€»ç»“ï¼š

è¿™æ®µä»£ç çš„æ€»ä½“ä½œç”¨æ˜¯ï¼š

> å°†ä¸€ä¸ªæ•°æ®é›†åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œå¹¶æ‰“å°å®ƒä»¬çš„å†…å®¹å’Œç»´åº¦ä¿¡æ¯ï¼Œç”¨äºåç»­çš„æ¨¡å‹è®­ç»ƒå’Œè¯„ä¼°ã€‚

å¦‚æœä½ æ˜¯åœ¨å¤„ç†æœºå™¨å­¦ä¹ ä»»åŠ¡ï¼Œæ¯”å¦‚é¸¢å°¾èŠ±åˆ†ç±»ã€æ‰‹å†™æ•°å­—è¯†åˆ«ç­‰ï¼Œè¿™æ˜¯éå¸¸å¸¸è§çš„å‡†å¤‡æ­¥éª¤ä¹‹ä¸€ã€‚



##### æ‚¨è¯´ï¼š

ä¸ºä»€ä¹ˆè®¾ç½®random_state=1



###### ChatGPT è¯´ï¼š

è®¾ç½® `random_state=1` çš„ç›®çš„æ˜¯ï¼š

> **è®© `train_test_split()` åœ¨æ¯æ¬¡è¿è¡Œæ—¶åˆ’åˆ†å‡ºçš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†å§‹ç»ˆä¸€è‡´ï¼ˆå¯å¤ç°ï¼‰**ã€‚

------

### ğŸ“Œ èƒŒæ™¯è§£é‡Šï¼š

`train_test_split()` é»˜è®¤æ˜¯**éšæœºåˆ’åˆ†æ•°æ®**çš„ã€‚å¦‚æœä½ ä¸è®¾ç½® `random_state`ï¼Œæ¯æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼Œåˆ’åˆ†çš„ç»“æœéƒ½å¯èƒ½ä¸åŒï¼Œå¯¼è‡´ï¼š

- è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸åŒï¼›
- æ¨¡å‹è®­ç»ƒç»“æœå¯èƒ½å˜åŒ–ï¼›
- ä¸æ–¹ä¾¿è°ƒè¯•å’Œå¯¹æ¯”ä¸åŒæ¨¡å‹ã€‚

------

### âœ… è®¾ç½® `random_state=1` å¸¦æ¥çš„å¥½å¤„ï¼š

| é¡¹ç›®             | å«ä¹‰                                          |
| ---------------- | --------------------------------------------- |
| `random_state=1` | æŒ‡å®šäº†éšæœºç§å­ä¸º 1                            |
| ç¨³å®šæ€§           | æ¯æ¬¡åˆ’åˆ†ç»“æœéƒ½ç›¸åŒ                            |
| å¯å¯¹æ¯”æ€§         | å¤šæ¬¡è®­ç»ƒç»“æœå¯æ¯”è¾ƒã€å¯å¤æŸ¥                    |
| å¯å¤ç°æ€§         | åˆ«äººè¿è¡Œä½ çš„ä»£ç æ—¶ä¹Ÿèƒ½å¾—åˆ°åŒæ ·çš„è®­ç»ƒ/æµ‹è¯•æ•°æ® |



ä½ å¯ä»¥ç†è§£ä¸ºï¼š

> `random_state` å°±åƒæ˜¯â€œæ´—ç‰Œçš„å¯†ç â€ï¼Œç›¸åŒçš„å¯†ç æ¯æ¬¡æ´—å‡ºçš„ç‰Œé¡ºåºéƒ½ä¸€æ ·ã€‚

------

### ğŸ’¡ è¡¥å……è¯´æ˜ï¼š

ä½ å¯ä»¥è®¾ç½®ä¸ºä»»æ„æ•´æ•°ï¼ˆå¦‚ 0ã€1ã€42 éƒ½å¯ä»¥ï¼‰ï¼Œåªè¦åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ç»Ÿä¸€å³å¯ã€‚ä¾‹å¦‚ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
random_state=42  # ä¹Ÿæ˜¯å¾ˆå¤šæ•™ç¨‹å’Œè®ºæ–‡å–œæ¬¢ç”¨çš„é»˜è®¤å€¼
```

------

### â— å¦‚æœä½ ä¸è®¾ç½® `random_state` ä¼šæ€æ ·ï¼Ÿ

```
python


å¤åˆ¶ç¼–è¾‘
train_test_split(..., test_size=0.25)
```

è¿™æ ·æ¯æ¬¡è¿è¡Œç¨‹åºï¼Œå¾—åˆ°çš„ `x_train`, `x_test` éƒ½å¯èƒ½ä¸åŒï¼Œå¯¼è‡´ç»“æœä¸ç¨³å®šã€‚

------

### âœ… æ€»ç»“ä¸€å¥è¯ï¼š

> è®¾ç½® `random_state=1` æ˜¯ä¸ºäº†ç¡®ä¿æ•°æ®åˆ’åˆ†å¯é‡å¤ã€ç»“æœå¯æ¯”è¾ƒï¼Œæ˜¯è‰¯å¥½çš„æœºå™¨å­¦ä¹ å®è·µä¹‹ä¸€ã€‚



##### æ‚¨è¯´ï¼š

train_test_split(li.data, li.target, test_size=0.25, random_state=1)å‡½æ•°çš„è¿”å›å€¼é¡ºåº



###### ChatGPT è¯´ï¼š

å‡½æ•° `train_test_split(li.data, li.target, test_size=0.25, random_state=1)` çš„è¿”å›å€¼é¡ºåºæ˜¯ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
x_train, x_test, y_train, y_test
```

ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒè¿”å›çš„æ˜¯**è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„ç‰¹å¾å€¼ä¸ç›®æ ‡å€¼ï¼ŒæŒ‰ç…§ä»¥ä¸‹é¡ºåºæ’åˆ—**ï¼š

| è¿”å›å€¼    | å«ä¹‰                       |
| --------- | -------------------------- |
| `x_train` | è®­ç»ƒé›†çš„ç‰¹å¾æ•°æ®ï¼ˆç‰¹å¾å€¼ï¼‰ |
| `x_test`  | æµ‹è¯•é›†çš„ç‰¹å¾æ•°æ®           |
| `y_train` | è®­ç»ƒé›†çš„ç›®æ ‡æ•°æ®ï¼ˆæ ‡ç­¾ï¼‰   |
| `y_test`  | æµ‹è¯•é›†çš„ç›®æ ‡æ•°æ®           |



------

### âœ… ä¸¾ä¸ªä¾‹å­ï¼š

å‡è®¾ä½ å†™äº†å¦‚ä¸‹ä»£ç ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘from sklearn.model_selection import train_test_split
from sklearn.datasets import load_iris

li = load_iris()
x_train, x_test, y_train, y_test = train_test_split(li.data, li.target, test_size=0.25, random_state=1)
```

åˆ™ï¼š

- `x_train.shape` æ˜¯ `(112, 4)`ï¼Œè®­ç»ƒé›†ä¸­æœ‰ 112 æ¡æ ·æœ¬ï¼Œæ¯æ¡æœ‰ 4 ä¸ªç‰¹å¾ï¼›
- `x_test.shape` æ˜¯ `(38, 4)`ï¼Œæµ‹è¯•é›†ä¸­æœ‰ 38 æ¡æ ·æœ¬ï¼›
- `y_train.shape` æ˜¯ `(112,)`ï¼Œç›®æ ‡æ ‡ç­¾æ˜¯ 1D æ•°ç»„ï¼›
- `y_test.shape` æ˜¯ `(38,)`ã€‚

------

### ğŸ“Œ æ³¨æ„ï¼š

`train_test_split()` æ”¯æŒä¼ å…¥å¤šä¸ªæ•°ç»„ï¼Œä¼š**æŒ‰ç›¸åŒçš„æ–¹å¼æ‹†åˆ†è¿™äº›æ•°ç»„**ï¼Œè¿”å›å€¼çš„é¡ºåºä¸ä¼ å…¥é¡ºåºä¸€è‡´ã€‚ä¾‹å¦‚ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
x1_train, x1_test, x2_train, x2_test = train_test_split(x1, x2, test_size=0.25)
```

å°±æ˜¯åˆ†åˆ«å¯¹ `x1` å’Œ `x2` åšç›¸åŒåˆ’åˆ†ï¼Œè¿”å› `x1_train`, `x1_test`, `x2_train`, `x2_test`ã€‚

------

### âœ… æ€»ç»“ï¼š

> `train_test_split(data, target)` é»˜è®¤è¿”å›å€¼é¡ºåºæ˜¯ï¼š
>  `x_train`, `x_test`, `y_train`, `y_test`ï¼ˆ**è®­ç»ƒç‰¹å¾ã€æµ‹è¯•ç‰¹å¾ã€è®­ç»ƒæ ‡ç­¾ã€æµ‹è¯•æ ‡ç­¾**ï¼‰ã€‚
>  ä½ åº”è¯¥æŒ‰ç…§è¿™ä¸ªé¡ºåºè¿›è¡Œå˜é‡æ¥æ”¶ã€‚



##### æ‚¨è¯´ï¼š

\# ä¸‹é¢æ˜¯æ¯”è¾ƒå¤§çš„æ•°æ®ï¼Œéœ€è¦ä¸‹è½½ä¸€ä¼šï¼Œ20ç±»æ–°é—» #subsetä»£è¡¨ä¸‹è½½çš„æ•°æ®é›†ç±»å‹ï¼Œé»˜è®¤æ˜¯trainï¼Œåªæœ‰è®­ç»ƒé›† news = fetch_20newsgroups(subset='all', data_home='data') # print(news.feature_names)  #è¿™ä¸ªæ•°æ®é›†æ˜¯æ²¡æœ‰çš„ï¼Œå› ä¸ºæ²¡æœ‰ç‰¹å¾ï¼Œåªæœ‰æ–‡æœ¬æ•°æ® # print(news.DESCR) print('ç¬¬ä¸€ä¸ªæ ·æœ¬') print(news.data[0]) print('ç‰¹å¾ç±»å‹') print(type(news.data)) print('-' * 50) print(news.target[0:15]) from pprint import pprint pprint(list(news.target_names))ä¸Šé¢ä»£ç çš„ä½œç”¨



###### ChatGPT è¯´ï¼š

ä½ è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š

> **ä¸‹è½½å¹¶åŠ è½½ 20 ç±»æ–°é—»æ–‡æœ¬æ•°æ®é›†ï¼ˆ`20newsgroups`ï¼‰ï¼Œå¹¶æŸ¥çœ‹éƒ¨åˆ†å†…å®¹ã€ç±»å‹å’Œç›®æ ‡åˆ†ç±»ä¿¡æ¯**ã€‚

ä¸‹é¢æˆ‘æ¥é€è¡Œè§£é‡Šï¼š

------

### âœ… 1. ä¸‹è½½æ–°é—»æ•°æ®é›†

```
pythonå¤åˆ¶ç¼–è¾‘from sklearn.datasets import fetch_20newsgroups

news = fetch_20newsgroups(subset='all', data_home='data')
```

- `fetch_20newsgroups(...)` æ˜¯ sklearn æä¾›çš„å‡½æ•°ï¼Œç”¨äºä¸‹è½½**20ç±»æ–°é—»æ•°æ®é›†**ã€‚
- `subset='all'`ï¼šè¡¨ç¤ºä¸‹è½½ **å…¨éƒ¨æ•°æ®**ï¼ˆåŒ…æ‹¬è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼‰ã€‚
  - ä¹Ÿå¯ä»¥è®¾ä¸º `'train'` æˆ– `'test'`
- `data_home='data'`ï¼šæŒ‡å®šæŠŠæ•°æ®å­˜åˆ° `data/` ç›®å½•ä¸‹ï¼Œé¿å…é‡å¤ä¸‹è½½ã€‚

ğŸ“Œ **æ•°æ®ç»“æ„è¯´æ˜ï¼š**
 è¿”å›çš„æ˜¯ä¸€ä¸ª `sklearn.utils.Bunch` å¯¹è±¡ï¼Œç±»ä¼¼äºå­—å…¸ï¼Œæœ‰ä»¥ä¸‹å¸¸ç”¨å­—æ®µï¼š

| å­—æ®µå         | å«ä¹‰                           |
| -------------- | ------------------------------ |
| `data`         | æ‰€æœ‰æ–°é—»æ–‡æœ¬åˆ—è¡¨ï¼ˆå­—ç¬¦ä¸²ï¼‰     |
| `target`       | æ¯æ¡æ–°é—»å¯¹åº”çš„ç±»åˆ«ç¼–å·ï¼ˆ0~19ï¼‰ |
| `target_names` | ç±»åˆ«ç¼–å·å¯¹åº”çš„ç±»åï¼ˆå…± 20 ä¸ªï¼‰ |



------

### âœ… 2. æŸ¥çœ‹ç¬¬ä¸€ä¸ªæ–°é—»æ ·æœ¬å†…å®¹

```
pythonå¤åˆ¶ç¼–è¾‘print('ç¬¬ä¸€ä¸ªæ ·æœ¬')
print(news.data[0])
```

- æ‰“å°å‡ºç¬¬ä¸€æ¡æ–°é—»çš„åŸå§‹æ–‡æœ¬å†…å®¹ï¼ˆçº¯æ–‡æœ¬ï¼‰ã€‚

------

### âœ… 3. æŸ¥çœ‹æ•°æ®ç±»å‹

```
pythonå¤åˆ¶ç¼–è¾‘print('ç‰¹å¾ç±»å‹')
print(type(news.data))
```

- è¾“å‡º `news.data` çš„ç±»å‹ï¼Œé€šå¸¸æ˜¯ `list`ï¼Œå…¶ä¸­æ¯ä¸€é¡¹æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå³ä¸€ç¯‡æ–‡ç« ï¼‰ã€‚

------

### âœ… 4. æ‰“å°ç›®æ ‡å€¼å‰ 15 ä¸ª

```
pythonå¤åˆ¶ç¼–è¾‘print('-' * 50)
print(news.target[0:15])
```

- `news.target` æ˜¯ä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œå¯¹åº”æ¯ç¯‡æ–°é—»çš„**ç±»åˆ«ç¼–å·**ã€‚
- è¿™è¡Œä»£ç æ‰“å°å‰ 15 ç¯‡æ–‡ç« å¯¹åº”çš„ç±»åˆ«ç¼–å·ã€‚

------

### âœ… 5. æ‰“å°æ‰€æœ‰çš„ç±»åˆ«åç§°ï¼ˆå³æ–°é—»ä¸»é¢˜ï¼‰

```
pythonå¤åˆ¶ç¼–è¾‘from pprint import pprint
pprint(list(news.target_names))
```

- `news.target_names` æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰ 20 ä¸ªæ–°é—»ç±»åˆ«çš„åç§°ï¼ˆå­—ç¬¦ä¸²ï¼‰ã€‚
- `pprint()` å¯ä»¥æ›´æ¸…æ™°åœ°æ‰“å°åˆ—è¡¨ï¼Œæ ¼å¼æ›´æ•´é½ã€‚

------

### ğŸ“š ç¤ºä¾‹è¾“å‡ºï¼ˆå¯èƒ½é•¿è¿™æ ·ï¼‰ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘ç¬¬ä¸€ä¸ªæ ·æœ¬
From: lerxst@wam.umd.edu (where's my thing)
Subject: WHAT car is this!?
...
ç‰¹å¾ç±»å‹
<class 'list'>
--------------------------------------------------
[7, 4, 4, 1, 14, 16, 3, 4, 4, 1, 4, 4, 2, 4, 5]
['alt.atheism',
 'comp.graphics',
 'comp.os.ms-windows.misc',
 'comp.sys.ibm.pc.hardware',
 ...
 'talk.religion.misc']
```

------

### âœ… æ€»ç»“ï¼š

è¿™æ®µä»£ç æ˜¯ä¸ºäº†ï¼š

1. **åŠ è½½å¹¶æŸ¥çœ‹ 20 ç±»æ–°é—»æ•°æ®é›†**ï¼›
2. **äº†è§£æ•°æ®ç»“æ„ï¼ˆæ–‡æœ¬å†…å®¹ + ç±»åˆ«ç¼–å·ï¼‰**ï¼›
3. **ä¸ºåç»­åšæ–‡æœ¬åˆ†ç±»æ‰“å¥½åŸºç¡€ï¼ˆå¦‚ TF-IDF ç‰¹å¾æå–ã€æ¨¡å‹è®­ç»ƒç­‰ï¼‰**ã€‚

è¯¥æ•°æ®é›†å¸¸ç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰å®éªŒï¼Œå°¤å…¶é€‚åˆåšæ–‡æœ¬åˆ†ç±»ã€ä¸»é¢˜è¯†åˆ«ç­‰ä»»åŠ¡ã€‚



##### æ‚¨è¯´ï¼š

ä¸ºä»€ä¹ˆæ¯ç¯‡æ–°é—»è¦æœ‰ç±»åˆ«ç¼–å·



###### ChatGPT è¯´ï¼š

æ¯ç¯‡æ–°é—»éƒ½æœ‰**ç±»åˆ«ç¼–å·**ï¼Œæ˜¯å› ä¸ºï¼š

> ğŸ“Œ **æˆ‘ä»¬éœ€è¦â€œç›®æ ‡æ ‡ç­¾â€æ¥ç›‘ç£æ¨¡å‹è¿›è¡Œåˆ†ç±»å­¦ä¹ ã€‚**

ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œç±»åˆ«ç¼–å·å°±æ˜¯æˆ‘ä»¬è¦è®©æ¨¡å‹å­¦ä¼šâ€œé¢„æµ‹â€çš„å¯¹è±¡ã€‚

------

### ğŸ” ç±»åˆ«ç¼–å·çš„ä½œç”¨ï¼šæ ‡ç­¾ï¼

æœºå™¨å­¦ä¹ ç‰¹åˆ«æ˜¯ç›‘ç£å­¦ä¹ ä¸­ï¼Œæ¯æ¡æ•°æ®å¿…é¡»åŒ…æ‹¬ï¼š

| æˆåˆ†      | å«ä¹‰                     | ä¸¾ä¾‹                                           |
| --------- | ------------------------ | ---------------------------------------------- |
| ç‰¹å¾ï¼ˆXï¼‰ | å¯ç”¨æ¥åˆ¤æ–­çš„ä¿¡æ¯ï¼ˆè¾“å…¥ï¼‰ | æ–°é—»å†…å®¹ï¼Œå¦‚â€œiPhone å‘å¸ƒæ–°æ¬¾â€¦â€                 |
| æ ‡ç­¾ï¼ˆyï¼‰ | æ­£ç¡®ç­”æ¡ˆï¼ˆè¾“å‡ºç›®æ ‡ï¼‰     | æ–°é—»ç±»åˆ«ç¼–å·ï¼Œä¾‹å¦‚ 3 = `comp.sys.mac.hardware` |



------

### âœ… ä¸ºä»€ä¹ˆè¦ç”¨ç¼–å·ï¼ˆæ•´æ•°ï¼‰è¡¨ç¤ºç±»åˆ«ï¼Ÿ

è™½ç„¶ç±»åˆ«æœ¬èº«æ˜¯å­—ç¬¦ä¸²ï¼ˆå¦‚ `sci.space`, `comp.graphics`ï¼‰ï¼Œä½†æˆ‘ä»¬ç”¨æ•°å­—æ¥è¡¨ç¤ºæœ‰å¾ˆå¤šä¼˜åŠ¿ï¼š

| å¥½å¤„             | è¯´æ˜                                                 |
| ---------------- | ---------------------------------------------------- |
| ğŸš€ å¿«é€Ÿå¤„ç†       | æ•°å­—æ›´é€‚åˆæ¨¡å‹å¤„ç†ï¼Œé¿å…å­—ç¬¦ä¸²å¸¦æ¥çš„é¢å¤–å¼€é”€         |
| ğŸ¤– æ¨¡å‹å…¼å®¹       | å¤§å¤šæ•°æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚ SVMã€é€»è¾‘å›å½’ï¼‰è¦æ±‚ç›®æ ‡æ˜¯æ•°å­— |
| âœ… æ˜“ç¼–ç          | æ–¹ä¾¿ç”¨ `y == 3` è¿™æ ·çš„æ–¹å¼ç­›é€‰æ•°æ®                   |
| ğŸ¯ å¯æ˜ å°„å›å­—ç¬¦ä¸² | å¯ä»¥é€šè¿‡ `target_names[y]` æŠŠç¼–å·è½¬å›ç±»åˆ«åç§°        |



------

### ğŸ§  ä¸¾ä¸ªä¾‹å­ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘æ–°é—»å†…å®¹: "NASA releases new satellite data..."
ç±»åˆ«ç¼–å·: 15
ç±»åˆ«åç§°: 'sci.space'
```

æ¨¡å‹ä¼šå­¦ä¹ ï¼šå‡¡æ˜¯å‡ºç°åƒ "NASA", "satellite", "space" è¿™æ ·çš„å…³é”®è¯ï¼Œå¤§æ¦‚ç‡ç±»åˆ«ç¼–å·å°±æ˜¯ 15ã€‚

------

### ğŸ” åˆ†ç±»ä»»åŠ¡å°±æ˜¯å­¦ä¼šï¼šæ–‡æœ¬ âœ ç±»åˆ«ç¼–å·

æ¨¡å‹è®­ç»ƒç›®æ ‡ï¼š

- è¾“å…¥ï¼šä¸€ç¯‡æ–°é—»æ–‡æœ¬ï¼ˆå­—ç¬¦ä¸²ï¼‰
- è¾“å‡ºï¼šä¸€ä¸ªæ•°å­—ï¼ˆç±»åˆ«ç¼–å·ï¼‰

æœ€ç»ˆæˆ‘ä»¬å¸Œæœ›æ¨¡å‹èƒ½**é¢„æµ‹å‡ºä»»æ„æ–°æ–‡ç« çš„æ­£ç¡®ç±»åˆ«ç¼–å·**ã€‚

------

### âœ… æ€»ç»“ä¸€å¥è¯ï¼š

> ç±»åˆ«ç¼–å·æ˜¯æ¯ç¯‡æ–°é—»çš„â€œæ­£ç¡®æ ‡ç­¾â€ï¼Œæ˜¯æ–‡æœ¬åˆ†ç±»æ¨¡å‹å­¦ä¹ å’Œè¯„ä¼°çš„åŸºç¡€ã€‚
>  ç”¨æ•°å­—è€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¾¿äºæ¨¡å‹å¤„ç†ã€é«˜æ•ˆè®­ç»ƒï¼Œå¹¶å¯ä»¥è½»æ¾ä¸ç±»åˆ«åç§°ä¸€ä¸€å¯¹åº”ã€‚



##### æ‚¨è¯´ï¼š

print('-' * 50) print(len(news.data)) print('æ–°é—»æ‰€æœ‰çš„æ ‡ç­¾') print(news.target) print('-' * 50)ä»£ç ä½œç”¨  print(min(news.target), max(news.target))



###### ChatGPT è¯´ï¼š

ä¸‹é¢æˆ‘ä»¬æ¥é€è¡Œè§£é‡Šä½ è¿™æ®µä»£ç çš„ä½œç”¨ï¼Œå®ƒæ˜¯ç”¨æ¥**æŸ¥çœ‹20ç±»æ–°é—»æ•°æ®é›†ï¼ˆ`news`ï¼‰çš„åŸºæœ¬ä¿¡æ¯**çš„ï¼š

------

### ğŸ”¢ ä»£ç è§£æå¦‚ä¸‹ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

- æ‰“å°ä¸€æ¡åˆ†éš”çº¿ï¼Œç”± 50 ä¸ª `-` ç»„æˆã€‚
- ä½œç”¨ï¼šè®©è¾“å‡ºç»“æœæ›´æ¸…æ™°ã€ç¾è§‚ï¼Œä¾¿äºé˜…è¯»ã€‚

------

```
python


å¤åˆ¶ç¼–è¾‘
print(len(news.data))
```

- è¾“å‡ºï¼š**æ•°æ®é›†ä¸­æ–°é—»çš„æ€»æ•°**ã€‚
- `news.data` æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰æ–‡æœ¬æ–°é—»ã€‚
- `len(news.data)` è¡¨ç¤ºä¸€å…±æœ‰å¤šå°‘æ¡æ–°é—»æ ·æœ¬ã€‚

âœ… æ¯”å¦‚ï¼šè¾“å‡ºå¯èƒ½æ˜¯ `18846`ï¼Œè¡¨ç¤ºæ•°æ®é›†ä¸­æœ‰ **18846 æ¡æ–°é—»æ–‡ç« **ã€‚

------

```
pythonå¤åˆ¶ç¼–è¾‘print('æ–°é—»æ‰€æœ‰çš„æ ‡ç­¾')
print(news.target)
```

- `news.target` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œ**æ¯ä¸€æ¡æ–°é—»å¯¹åº”ä¸€ä¸ªæ•°å­—æ ‡ç­¾ï¼ˆç±»åˆ«ç¼–å·ï¼‰**ã€‚
- æ‰“å°å‡ºæ¥çš„ç»“æœç±»ä¼¼è¿™æ ·ï¼š

```
text


å¤åˆ¶ç¼–è¾‘
[10  3 17 ... 3  1  5]
```

è¿™è¯´æ˜ï¼š

- ç¬¬ 1 æ¡æ–°é—»æ˜¯ç¬¬ 10 ç±»
- ç¬¬ 2 æ¡æ˜¯ç¬¬ 3 ç±»
- ç¬¬ 3 æ¡æ˜¯ç¬¬ 17 ç±»ï¼Œâ€¦â€¦
- ä¸€å…±æœ‰ 20 ç±»ï¼Œç¼–å·ä» 0 åˆ° 19

------

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

- åˆæ˜¯ä¸€æ¡åˆ†éš”çº¿ï¼Œç”¨äºåˆ†éš”è¾“å‡ºå†…å®¹ã€‚

------

```
python


å¤åˆ¶ç¼–è¾‘
print(min(news.target), max(news.target))
```

- è¾“å‡ºï¼š`news.target` ä¸­çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œä¹Ÿå°±æ˜¯ï¼š
  - æ‰€æœ‰ç±»åˆ«ç¼–å·ä¸­**æœ€å°çš„ç¼–å·**
  - æ‰€æœ‰ç±»åˆ«ç¼–å·ä¸­**æœ€å¤§çš„ç¼–å·**

âœ… åœ¨ 20 ç±»æ–°é—»ä¸­ï¼Œè¾“å‡ºé€šå¸¸æ˜¯ï¼š

```
text


å¤åˆ¶ç¼–è¾‘
0 19
```

è¡¨ç¤ºï¼š

- ç±»åˆ«ç¼–å·ä» 0 å¼€å§‹
- åˆ° 19 ç»“æŸï¼Œä¸€å…± **20 ç±»æ–°é—»**

------

### ğŸ“¦ æ€»ç»“ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š

> **æŸ¥çœ‹æ•°æ®é›†ä¸­æ–°é—»æ•°é‡ã€æ¯æ¡æ–°é—»çš„æ ‡ç­¾ã€ä»¥åŠæ ‡ç­¾ç¼–å·çš„èŒƒå›´ã€‚**

| ä»£ç                                  | ä½œç”¨è¯´æ˜                 |
| ------------------------------------ | ------------------------ |
| `len(news.data)`                     | è¾“å‡ºæ–°é—»æ¡æ•°             |
| `news.target`                        | æ‰€æœ‰æ–°é—»çš„æ ‡ç­¾ç¼–å·       |
| `min(news.target), max(news.target)` | æ ‡ç­¾ç¼–å·çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ |



è¿™äº›ä¿¡æ¯å¯¹äº†è§£æ•°æ®ç»“æ„éå¸¸é‡è¦ï¼Œæ˜¯**æ–‡æœ¬åˆ†ç±»ä»»åŠ¡çš„ç¬¬ä¸€æ­¥ï¼šæ•°æ®ç†è§£ä¸æ£€æŸ¥**ã€‚



##### æ‚¨è¯´ï¼š

house=fetch_california_housing(data_home='data') print("è·å–ç‰¹å¾å€¼") print(house.data[0])  #ç¬¬ä¸€ä¸ªæ ·æœ¬ç‰¹å¾å€¼ print('æ ·æœ¬çš„å½¢çŠ¶') print(house.data.shape)ä»£ç ä½œç”¨  print('-' * 50)



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç æ˜¯ç”¨æ¥**åŠ è½½åŠ å·æˆ¿ä»·æ•°æ®é›†ï¼ˆCalifornia Housingï¼‰å¹¶æŸ¥çœ‹éƒ¨åˆ†ç‰¹å¾ä¿¡æ¯**çš„ã€‚ä¸‹é¢é€è¡Œè§£é‡Šå…¶å…·ä½“ä½œç”¨ï¼š

------

### ğŸ” 1. åŠ è½½æ•°æ®é›†

```
pythonå¤åˆ¶ç¼–è¾‘from sklearn.datasets import fetch_california_housing

house = fetch_california_housing(data_home='data')
```

- `fetch_california_housing()`ï¼šä» sklearn ä¸‹è½½ **åŠ å·æˆ¿ä»·æ•°æ®é›†**ã€‚
- `data_home='data'`ï¼šæŠŠæ•°æ®ä¿å­˜åˆ°æœ¬åœ°çš„ `data/` ç›®å½•ï¼Œé¿å…é‡å¤ä¸‹è½½ã€‚
- è¿”å›å€¼ `house` æ˜¯ä¸€ä¸ª `Bunch` å¯¹è±¡ï¼Œç±»ä¼¼äºå­—å…¸ï¼ŒåŒ…å«å¦‚ä¸‹å†…å®¹ï¼š

| å­—æ®µ            | å«ä¹‰                                   |
| --------------- | -------------------------------------- |
| `data`          | æ ·æœ¬çš„ç‰¹å¾ï¼ˆäºŒç»´æ•°ç»„ï¼‰                 |
| `target`        | æ¯ä¸ªæ ·æœ¬çš„æˆ¿ä»·ï¼ˆç›®æ ‡å€¼ï¼Œå•ä½æ˜¯åƒç¾å…ƒï¼‰ |
| `feature_names` | æ¯ä¸ªç‰¹å¾çš„åç§°ï¼ˆå¦‚æ”¶å…¥ã€æˆ¿é—´æ•°ç­‰ï¼‰     |
| `DESCR`         | æ•°æ®é›†çš„æè¿°æ–‡æœ¬                       |



------

### ğŸ” 2. æ‰“å°ç¬¬ä¸€ä¸ªæ ·æœ¬çš„ç‰¹å¾å€¼

```
pythonå¤åˆ¶ç¼–è¾‘print("è·å–ç‰¹å¾å€¼")
print(house.data[0])  # ç¬¬ä¸€ä¸ªæ ·æœ¬çš„ç‰¹å¾å€¼
```

- è¾“å‡ºåŠ å·æˆ¿ä»·æ•°æ®é›†ä¸­ç¬¬ä¸€ä¸ªæ ·æœ¬çš„ 8 ä¸ªç‰¹å¾å€¼ï¼Œä¾‹å¦‚ï¼š

```
text


å¤åˆ¶ç¼–è¾‘
[8.3252e+00 4.1000e+01 6.9841e+00 1.0238e+00 3.2200e+02 2.5556e+00 3.7880e+01 9.4300e+00]
```

è¿™äº›ç‰¹å¾åŒ…æ‹¬ï¼š

1. äººå‡æ”¶å…¥
2. æˆ¿å±‹å¹´é¾„ä¸­ä½æ•°
3. å¹³å‡æˆ¿é—´æ•°
4. å¹³å‡å§å®¤æ•°
5. å±…æ°‘æ•°é‡
6. å¹³å‡å®¶åº­äººæ•°
7. ç»åº¦
8. çº¬åº¦

------

### ğŸ” 3. æ‰“å°æ•°æ®çš„å½¢çŠ¶

```
pythonå¤åˆ¶ç¼–è¾‘print('æ ·æœ¬çš„å½¢çŠ¶')
print(house.data.shape)
```

- æ‰“å°çš„æ˜¯ `data` çš„å½¢çŠ¶ï¼Œé€šå¸¸æ˜¯ï¼š

```
text


å¤åˆ¶ç¼–è¾‘
(20640, 8)
```

æ„æ€æ˜¯ï¼šæ•°æ®é›†ä¸­ä¸€å…±æœ‰ **20640 ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬æœ‰ 8 ä¸ªç‰¹å¾**ã€‚

------

### ğŸ” 4. åˆ†å‰²çº¿ï¼ˆç¾åŒ–è¾“å‡ºï¼‰

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

- æ‰“å°å‡ºä¸€æ¡ç”± 50 ä¸ª `-` ç»„æˆçš„åˆ†éš”çº¿ï¼Œç”¨äºåˆ†éš”è¾“å‡ºå†…å®¹ï¼Œæå‡å¯è¯»æ€§ã€‚

------

### âœ… æ€»ç»“

| ä»£ç                          | ä½œç”¨                                    |
| ---------------------------- | --------------------------------------- |
| `fetch_california_housing()` | ä¸‹è½½å¹¶åŠ è½½åŠ å·æˆ¿ä»·æ•°æ®                  |
| `house.data[0]`              | æŸ¥çœ‹ç¬¬ä¸€ä¸ªæ ·æœ¬çš„ç‰¹å¾å€¼                  |
| `house.data.shape`           | æŸ¥çœ‹æ‰€æœ‰æ•°æ®çš„è¡Œåˆ—æ•°ï¼ˆæ ·æœ¬æ•° Ã— ç‰¹å¾æ•°ï¼‰ |
| `print('-'*50)`              | è¾“å‡ºåˆ†éš”çº¿                              |



------

è¿™ä¸ªæ•°æ®é›†å¸¸ç”¨äº**å›å½’æ¨¡å‹è®­ç»ƒ**ï¼Œç›®æ ‡æ˜¯é¢„æµ‹æ¯ä¸ªåŒºåŸŸçš„å¹³å‡æˆ¿ä»·ã€‚



##### æ‚¨è¯´ï¼š

print("ç›®æ ‡å€¼") print(house.target) print('-' * 50) print(house.DESCR) print('-' * 50) print(house.feature_names) print('-' * 50)ä»£ç ä½œç”¨



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š**æŸ¥çœ‹ California Housingï¼ˆåŠ å·æˆ¿ä»·ï¼‰æ•°æ®é›†ä¸­çš„ç›®æ ‡å€¼ã€æ•°æ®æè¿°ã€ç‰¹å¾åç§°**ã€‚ä¸‹é¢æ˜¯é€è¡Œè®²è§£ï¼š

------

### 1ï¸âƒ£ æŸ¥çœ‹ç›®æ ‡å€¼ï¼ˆæˆ¿ä»·ï¼‰

```
pythonå¤åˆ¶ç¼–è¾‘print("ç›®æ ‡å€¼")
print(house.target)
```

- `house.target` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºæ¯æ¡æ ·æœ¬çš„**æˆ¿ä»·ä¸­ä½æ•°**ï¼ˆå•ä½æ˜¯ï¼šåƒç¾å…ƒï¼‰ã€‚

- ç¤ºä¾‹è¾“å‡ºï¼ˆå‰å‡ é¡¹ï¼‰ï¼š

  ```
  python
  
  
  å¤åˆ¶ç¼–è¾‘
  [4.526 3.585 3.521 ... 0.923 0.847 0.894]
  ```

- è¯´æ˜ï¼š

  - ç¬¬ 1 ä¸ªæ ·æœ¬çš„æˆ¿ä»·ä¸º $4.526 ä¸‡ç¾å…ƒ
  - ç¬¬ 2 ä¸ªæ ·æœ¬çš„æˆ¿ä»·ä¸º $3.585 ä¸‡ç¾å…ƒ
  - â€¦â€¦

âœ… è¿™æ˜¯è®­ç»ƒå›å½’æ¨¡å‹çš„ç›®æ ‡ï¼ˆy å€¼ï¼‰ã€‚

------

### 2ï¸âƒ£ æ‰“å°åˆ†éš”çº¿

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

- ç¾åŒ–è¾“å‡ºï¼Œè®©å†…å®¹ç»“æ„æ›´æ¸…æ™°ã€‚

------

### 3ï¸âƒ£ æŸ¥çœ‹æ•°æ®é›†çš„æ•´ä½“æè¿°

```
python


å¤åˆ¶ç¼–è¾‘
print(house.DESCR)
```

- `house.DESCR` æ˜¯å­—ç¬¦ä¸²ï¼ŒåŒ…å«æ•´ä¸ªæ•°æ®é›†çš„è¯¦ç»†ä»‹ç»ï¼ŒåŒ…æ‹¬ï¼š
  - æ•°æ®æ¥æº
  - ç‰¹å¾è§£é‡Š
  - ç»Ÿè®¡ä¿¡æ¯
  - ä½¿ç”¨å»ºè®®

ğŸ“ ç¤ºä¾‹å†…å®¹ç‰‡æ®µï¼ˆå¯èƒ½å¾ˆé•¿ï¼‰ï¼š

```
mathematicaå¤åˆ¶ç¼–è¾‘.. _california_housing_dataset:

California Housing dataset
---------------------------

**Data Set Characteristics:**

    :Number of Instances: 20640
    :Number of Attributes: 8 numeric, predictive attributes and the target
    ...
```

âœ… è¿™ä¸ªå­—æ®µéå¸¸æœ‰ç”¨ï¼Œå¯ä»¥å¿«é€Ÿäº†è§£æ•°æ®èƒŒæ™¯å’Œç”¨é€”ã€‚

------

### 4ï¸âƒ£ å†æ¬¡æ‰“å°åˆ†éš”çº¿

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

------

### 5ï¸âƒ£ æŸ¥çœ‹æ‰€æœ‰ç‰¹å¾åç§°

```
python


å¤åˆ¶ç¼–è¾‘
print(house.feature_names)
```

- è¾“å‡ºçš„æ˜¯åˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰ç‰¹å¾çš„åå­—ï¼ˆæ€»å…± 8 ä¸ªï¼‰ï¼Œä¾‹å¦‚ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
['MedInc', 'HouseAge', 'AveRooms', 'AveBedrms', 'Population', 'AveOccup', 'Latitude', 'Longitude']
```

ğŸ“Œ è§£é‡Šå¦‚ä¸‹ï¼š

| ç‰¹å¾å       | å«ä¹‰                     |
| ------------ | ------------------------ |
| `MedInc`     | åŒºåŸŸä½æˆ·çš„**æ”¶å…¥ä¸­ä½æ•°** |
| `HouseAge`   | æˆ¿å±‹çš„**å¹´é¾„ä¸­ä½æ•°**     |
| `AveRooms`   | æ¯æˆ·çš„**å¹³å‡æˆ¿é—´æ•°**     |
| `AveBedrms`  | æ¯æˆ·çš„**å¹³å‡å§å®¤æ•°**     |
| `Population` | åŒºåŸŸå†…**äººå£æ•°é‡**       |
| `AveOccup`   | å¹³å‡æ¯ä¸ªå®¶åº­çš„äººå£æ•°     |
| `Latitude`   | åŒºåŸŸçš„**çº¬åº¦**           |
| `Longitude`  | åŒºåŸŸçš„**ç»åº¦**           |



------

### âœ… æ€»ç»“åŠŸèƒ½è¡¨ï¼š

| ä»£ç                   | åŠŸèƒ½è¯´æ˜                   |
| --------------------- | -------------------------- |
| `house.target`        | æŸ¥çœ‹æ‰€æœ‰æ ·æœ¬å¯¹åº”çš„æˆ¿ä»·æ ‡ç­¾ |
| `house.DESCR`         | æŸ¥çœ‹æ•°æ®é›†è¯¦ç»†ä»‹ç»         |
| `house.feature_names` | æŸ¥çœ‹ 8 ä¸ªç‰¹å¾çš„åç§°åˆ—è¡¨    |
| `print('-'*50)`       | ç”¨äºåˆ†éš”è¾“å‡ºå†…å®¹ï¼Œä¾¿äºé˜…è¯» |



------

è¿™äº›ä»£ç å¸¸ç”¨äº **æ•°æ®åŠ è½½ä¸ç†è§£é˜¶æ®µ**ï¼Œå¸®åŠ©ä½ æŒæ¡æ¨¡å‹è®­ç»ƒæ‰€ä¾èµ–çš„æ•°æ®ç»“æ„å’Œå«ä¹‰ã€‚



##### æ‚¨è¯´ï¼š

\# Kè¿‘é‚» """ K-è¿‘é‚»é¢„æµ‹ç”¨æˆ·ç­¾åˆ°ä½ç½® :return:None """ # è¯»å–æ•°æ® data = pd.read_csv("./data/FBlocation/train.csv") print(data.head(10)) print(data.shape) print(data.info()) # å¤„ç†æ•°æ® # 1ã€ç¼©å°æ•°æ®,æŸ¥è¯¢æ•°æ®,ä¸ºäº†å‡å°‘è®¡ç®—æ—¶é—´ data = data.query("x > 1.0 &  x < 1.25 & y > 2.5 & y < 2.75")ä»£ç ä½œç”¨



###### ChatGPT è¯´ï¼š

ä½ è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ä½¿ç”¨ **Kè¿‘é‚»ç®—æ³•ï¼ˆKNNï¼‰é¢„æµ‹ç”¨æˆ·ç­¾åˆ°ä½ç½®**ï¼Œå¹¶åœ¨å¼€å§‹é˜¶æ®µå¯¹åŸå§‹æ•°æ®è¿›è¡Œè¯»å–å’Œç­›é€‰å¤„ç†ã€‚ä¸‹é¢æˆ‘é€è¡Œè§£é‡Šä»£ç çš„ä½œç”¨ï¼š

------

### ğŸ” ä¸€ã€Kè¿‘é‚»é¢„æµ‹ç­¾åˆ°ä½ç½®

```
pythonå¤åˆ¶ç¼–è¾‘"""
K-è¿‘é‚»é¢„æµ‹ç”¨æˆ·ç­¾åˆ°ä½ç½®
:return: None
"""
```

è¿™æ˜¯ä¸€ä¸ªæ–‡æ¡£å­—ç¬¦ä¸²ï¼Œç”¨æ¥è¯´æ˜æ•´ä¸ªä»£ç åŠŸèƒ½ï¼š

- åˆ©ç”¨ **K-è¿‘é‚»ç®—æ³•** å¯¹ **ç”¨æˆ·åœ¨æŸä¸ªä½ç½®ç­¾åˆ°çš„ä½ç½®ç‚¹** è¿›è¡Œé¢„æµ‹åˆ†ç±»ã€‚

------

### ğŸ“¥ äºŒã€è¯»å–åŸå§‹æ•°æ®

```
pythonå¤åˆ¶ç¼–è¾‘# è¯»å–æ•°æ®
data = pd.read_csv("./data/FBlocation/train.csv")
```

- ä½¿ç”¨ Pandas è¯»å–æœ¬åœ°è·¯å¾„ä¸‹çš„ `train.csv` æ•°æ®æ–‡ä»¶ï¼Œå­˜å…¥å˜é‡ `data`ã€‚
- æ•°æ®æ¥æºæ˜¯ Facebook Check-in çš„ä½ç½®ç­¾åˆ°æ•°æ®é›†ï¼ŒåŒ…å«ç”¨æˆ·åæ ‡å’Œç­¾åˆ°ä½ç½®ç­‰ä¿¡æ¯ã€‚

------

### ğŸ‘€ ä¸‰ã€æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯

```
python


å¤åˆ¶ç¼–è¾‘
print(data.head(10))
```

- æ‰“å°å‰ 10 æ¡æ•°æ®ï¼ŒæŸ¥çœ‹åŸå§‹æ•°æ®æ ¼å¼ä¸å†…å®¹ã€‚

```
python


å¤åˆ¶ç¼–è¾‘
print(data.shape)
```

- è¾“å‡ºæ•°æ®çš„å½¢çŠ¶ï¼Œå¦‚ `(291180, 10)` è¡¨ç¤ºæœ‰ 291180 æ¡è®°å½•ï¼Œ10 ä¸ªå­—æ®µã€‚

```
python


å¤åˆ¶ç¼–è¾‘
print(data.info())
```

- æ‰“å°æ¯ä¸€åˆ—çš„ç±»å‹ã€æ˜¯å¦æœ‰ç¼ºå¤±å€¼ï¼Œç”¨äº**æ•°æ®åˆæ­¥äº†è§£å’Œæ¸…æ´—å‡†å¤‡**ã€‚

------

### ğŸ§¹ å››ã€æ•°æ®é¢„å¤„ç† - ç­›é€‰ä¸€ä¸ªå°åŒºåŸŸ

```
pythonå¤åˆ¶ç¼–è¾‘# 1ã€ç¼©å°æ•°æ®,æŸ¥è¯¢æ•°æ®,ä¸ºäº†å‡å°‘è®¡ç®—æ—¶é—´
data = data.query("x > 1.0 & x < 1.25 & y > 2.5 & y < 2.75")
```

- ä½¿ç”¨ Pandas çš„ `.query()` æ–¹æ³•ç­›é€‰å‡ºåœ°ç†ä½ç½®åœ¨æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®ï¼š
  - `x` è¡¨ç¤ºæ¨ªåæ ‡ï¼ˆç»åº¦ç±»ä¼¼ï¼‰ï¼Œå–å€¼åœ¨ 1.0 åˆ° 1.25 ä¹‹é—´ï¼›
  - `y` è¡¨ç¤ºçºµåæ ‡ï¼ˆçº¬åº¦ç±»ä¼¼ï¼‰ï¼Œå–å€¼åœ¨ 2.5 åˆ° 2.75 ä¹‹é—´ã€‚
- åŸå› ï¼šè¯¥æ•°æ®é›†æœ¬èº«æ•°æ®é‡å¾ˆå¤§ï¼Œä¸ºäº†å‡å°‘åç»­è®­ç»ƒæ—¶é—´ï¼Œæˆ‘ä»¬**åªå–ä¸€ä¸ªå°èŒƒå›´çš„ç”¨æˆ·ä½ç½®åŒºåŸŸ**æ¥åšå®éªŒã€‚

ğŸ“Œ ç­›é€‰åçš„æ•°æ®å°±æ˜¯åªåŒ…å«é‚£ä¸€å°å—åŒºåŸŸä¸­çš„ç”¨æˆ·ç­¾åˆ°ç‚¹ï¼Œç”¨äºæœ¬åœ°èŒƒå›´å†…çš„åˆ†ç±»é¢„æµ‹ã€‚

------

### âœ… æ€»ç»“æ•´æ®µä»£ç ä½œç”¨ï¼š

| æ­¥éª¤       | ç›®çš„                             |
| ---------- | -------------------------------- |
| è¯»å–æ•°æ®é›† | åŠ è½½åŸå§‹ç­¾åˆ°æ•°æ®                 |
| æ‰“å°ä¿¡æ¯   | æŸ¥çœ‹æ•°æ®è§„æ¨¡ä¸ç»“æ„               |
| ç­›é€‰åæ ‡   | ä»…é€‰å–éƒ¨åˆ†åŒºåŸŸç”¨äºå®éªŒï¼Œæå‡æ•ˆç‡ |
| åç»­ç›®æ ‡   | ä½¿ç”¨ KNN æ¨¡å‹é¢„æµ‹ç­¾åˆ°ä½ç½®åˆ†ç±»    |



------

å¦‚æœä½ ç»§ç»­å¾€ä¸‹å†™ï¼Œä¼šä½¿ç”¨ `KNeighborsClassifier` å»ºæ¨¡ï¼Œç”¨ `x`, `y`, `accuracy`, `time` ç­‰ç‰¹å¾å»é¢„æµ‹ `place_id`ï¼ˆå³ç”¨æˆ·ç­¾åˆ°çš„çœŸå®ä½ç½®ï¼‰ã€‚éœ€è¦æ ‡å‡†åŒ–ã€åˆ’åˆ†è®­ç»ƒé›†ã€æ„å»ºæ¨¡å‹ç­‰åç»­æ­¥éª¤ã€‚éœ€è¦æˆ‘ç»§ç»­å¸®ä½ å†™åç»­ KNN æ¨¡å‹æµç¨‹å—ï¼Ÿ



##### æ‚¨è¯´ï¼š

è§£é‡Šä¸€ä¸‹ï¼š<class 'pandas.core.frame.DataFrame'> RangeIndex: 29118021 entries, 0 to 29118020 Data columns (total 6 columns): #   Column    Dtype   ---  ------    -----   0   row_id    int64   1   x         float64 2   y         float64 3   accuracy  int64   4   time      int64   5   place_id  int64   dtypes: float64(2), int64(4) memory usage: 1.3 GB None



###### ChatGPT è¯´ï¼š

ä½ æä¾›çš„æ˜¯ Pandas ä¸­ `DataFrame.info()` çš„è¾“å‡ºç»“æœï¼Œä¸‹é¢æ˜¯å¯¹å®ƒæ¯ä¸€éƒ¨åˆ†çš„è¯¦ç»†è§£é‡Šï¼š

------

### âœ… è¿™æ˜¯ DataFrame çš„åŸºæœ¬ä¿¡æ¯ï¼š

```
javascript


å¤åˆ¶ç¼–è¾‘
<class 'pandas.core.frame.DataFrame'>
```

ğŸ“Œ è¡¨ç¤ºï¼š`data` æ˜¯ä¸€ä¸ª Pandas çš„ **DataFrame** å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªäºŒç»´çš„è¡¨æ ¼ç»“æ„ï¼Œç±»ä¼¼ Excel è¡¨æ ¼æˆ– SQL è¡¨ã€‚

------

### âœ… è¡Œç´¢å¼•ä¿¡æ¯ï¼š

```
pgsql


å¤åˆ¶ç¼–è¾‘
RangeIndex: 29118021 entries, 0 to 29118020
```

- ä¸€å…±æœ‰ **29,118,021 æ¡æ•°æ®**ï¼ˆè¡Œï¼‰ï¼Œç¼–å·ä» 0 åˆ° 29118020ã€‚
- ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„ `RangeIndex`ï¼Œå³æ•´æ•°é€’å¢çš„è¡Œç´¢å¼•ã€‚

------

### âœ… åˆ—ä¿¡æ¯ï¼ˆå­—æ®µ + æ•°æ®ç±»å‹ï¼‰ï¼š

```
goå¤åˆ¶ç¼–è¾‘Data columns (total 6 columns):
 #   Column    Dtype  
---  ------    -----  
 0   row_id    int64  
 1   x         float64
 2   y         float64
 3   accuracy  int64  
 4   time      int64  
 5   place_id  int64  
```

| åˆ—å· | åˆ—å       | ç±»å‹      | å«ä¹‰è¯´æ˜                               |
| ---- | ---------- | --------- | -------------------------------------- |
| 0    | `row_id`   | `int64`   | è¡Œç¼–å·æˆ–æ ·æœ¬ç¼–å·ï¼ˆå”¯ä¸€ IDï¼‰            |
| 1    | `x`        | `float64` | æ¨ªåæ ‡ï¼ˆåœ°ç†åæ ‡ä¸­çš„ xï¼Œå•ä½ç±»ä¼¼ç»åº¦ï¼‰ |
| 2    | `y`        | `float64` | çºµåæ ‡ï¼ˆåœ°ç†åæ ‡ä¸­çš„ yï¼Œå•ä½ç±»ä¼¼çº¬åº¦ï¼‰ |
| 3    | `accuracy` | `int64`   | GPS ç²¾åº¦ï¼ˆæ•°å€¼è¶Šå¤§ï¼Œå¯èƒ½è¶Šä¸ç²¾ç¡®ï¼‰     |
| 4    | `time`     | `int64`   | æ—¶é—´æˆ³ï¼ˆå•ä½ä¸ºåˆ†é’Ÿï¼‰                   |
| 5    | `place_id` | `int64`   | ç­¾åˆ°ä½ç½®ç¼–å·ï¼ˆé¢„æµ‹ç›®æ ‡æ ‡ç­¾ï¼‰           |



------

### âœ… æ¯ç§æ•°æ®ç±»å‹ç»Ÿè®¡ï¼š

```
css


å¤åˆ¶ç¼–è¾‘
dtypes: float64(2), int64(4)
```

- è¡¨ç¤ºä¸€å…± 6 åˆ—ä¸­ï¼š
  - æœ‰ **2 åˆ—** æ˜¯ `float64` ç±»å‹ï¼ˆå³å°æ•°ï¼Œç²¾åº¦é«˜ï¼‰ï¼›
  - æœ‰ **4 åˆ—** æ˜¯ `int64` ç±»å‹ï¼ˆæ•´æ•°ï¼‰ã€‚

------

### âœ… å†…å­˜ä½¿ç”¨æƒ…å†µï¼š

```
wasm


å¤åˆ¶ç¼–è¾‘
memory usage: 1.3 GB
```

- æ•´ä¸ª DataFrame å ç”¨äº†çº¦ **1.3GB å†…å­˜**ã€‚
- æ•°æ®é‡éå¸¸å¤§ï¼Œå»ºè®®åœ¨è®­ç»ƒå‰åšæ•°æ®ç­›é€‰æˆ–é™ç»´ï¼Œå¦åˆ™å®¹æ˜“å ç”¨å¤ªå¤šå†…å­˜ã€‚

------

### âœ… `None` æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™æ˜¯ `print(data.info())` çš„è¿”å›å€¼ï¼š

- `data.info()` æœ¬èº«æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼ˆè¿”å›çš„æ˜¯ `None`ï¼‰ï¼Œåªæ˜¯åœ¨è°ƒç”¨æ—¶è‡ªåŠ¨æ‰“å°ä¿¡æ¯ã€‚
- å¦‚æœä½ å†™ `print(data.info())`ï¼Œæœ€åå°±ä¼šæ˜¾ç¤º `None`ã€‚

------

### ğŸ“Œ æ€»ç»“ï¼š

è¿™æ®µè¾“å‡ºå‘Šè¯‰æˆ‘ä»¬ï¼š

| é¡¹ç›®                      | å†…å®¹è¯´æ˜                         |
| ------------------------- | -------------------------------- |
| æ•°æ®æ€»é‡                  | 29118021 è¡Œï¼Œ6 åˆ—                |
| åˆ—åä¸ç±»å‹                | åŒ…å«åæ ‡ã€æ—¶é—´ã€ç²¾åº¦ã€ä½ç½® ID ç­‰ |
| å†…å­˜å ç”¨                  | çº¦ 1.3GB                         |
| ç›®æ ‡å˜é‡                  | `place_id`ï¼Œè¡¨ç¤ºç”¨æˆ·ç­¾åˆ°çš„ä½ç½®   |
| `print(data.info())` è¿”å› | `None`ï¼Œä»…è´Ÿè´£æ‰“å°ç»“æ„ä¿¡æ¯       |



------

å¦‚ä½ ç»§ç»­åç»­åˆ†æï¼ˆå¦‚ç”¨ KNN åˆ†ç±» `place_id`ï¼‰ï¼Œå»ºè®®å¯¹ `x` å’Œ `y` åšåŒºåŸŸç­›é€‰ï¼Œæˆ–å¯¹ç‰¹å¾è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œä»¥å‡å°‘è®¡ç®—å‹åŠ›ã€‚éœ€è¦æˆ‘å¸®ä½ å†™åç»­æ¨¡å‹æ­¥éª¤ä¹Ÿå¯ä»¥å‘Šè¯‰æˆ‘ã€‚



##### æ‚¨è¯´ï¼š

data.shape data.describe()ä»£ç ä½œç”¨



###### ChatGPT è¯´ï¼š

ä½ è¿™ä¸¤è¡Œä»£ç ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘data.shape
data.describe()
```

æ˜¯ç”¨äº **äº†è§£æ•°æ®è§„æ¨¡å’Œç»Ÿè®¡ç‰¹å¾** çš„ï¼Œä¸‹é¢é€ä¸€è§£é‡Šï¼š

------

### âœ… `data.shape`

ä½œç”¨ï¼šæŸ¥çœ‹ **æ•°æ®çš„è¡Œæ•°å’Œåˆ—æ•°ï¼ˆç»´åº¦ï¼‰**

ğŸ“Œ ç¤ºä¾‹è¾“å‡ºï¼š

```
python


å¤åˆ¶ç¼–è¾‘
(29118021, 6)
```

è¡¨ç¤ºï¼š

- æ•°æ®æœ‰ **29,118,021 è¡Œ**ï¼ˆå³ 2910 ä¸‡æ¡æ ·æœ¬ï¼‰
- æœ‰ **6 åˆ—**ï¼ˆç‰¹å¾å­—æ®µï¼‰

ğŸ’¡ ç­‰ä»·äºï¼š

```
python


å¤åˆ¶ç¼–è¾‘
print("æ•°æ®ç»´åº¦ï¼š", data.shape)
```

------

### âœ… `data.describe()`

ä½œç”¨ï¼šæŸ¥çœ‹æ•°å€¼åˆ—çš„ **æè¿°æ€§ç»Ÿè®¡ä¿¡æ¯**ï¼Œå¸®åŠ©ä½ å¿«é€Ÿäº†è§£æ¯ä¸ªå­—æ®µçš„å–å€¼åˆ†å¸ƒã€‚

ğŸ“Œ ç¤ºä¾‹è¾“å‡ºï¼ˆç®€ç•¥ï¼‰ï¼š

|       | row_id   | x        | y        | accuracy | time     | place_id |
| ----- | -------- | -------- | -------- | -------- | -------- | -------- |
| count | 2.91e+07 | 2.91e+07 | 2.91e+07 | 2.91e+07 | 2.91e+07 | 2.91e+07 |
| mean  | 1.46e+07 | 5.99     | 5.99     | 65.6     | 4.01e+06 | 8.77e+09 |
| std   | ...      | ...      | ...      | ...      | ...      | ...      |
| min   | 0        | 0.0      | 0.0      | 1        | 0        | 1        |
| 25%   | ...      | ...      | ...      | ...      | ...      | ...      |
| 50%   | ...      | ...      | ...      | ...      | ...      | ...      |
| 75%   | ...      | ...      | ...      | ...      | ...      | ...      |
| max   | 2.91e+07 | 10.0     | 10.0     | 1000+    | 7.86e+06 | 9.84e+09 |



è¿™äº›ç»Ÿè®¡é‡åˆ†åˆ«è¡¨ç¤ºï¼š

| æŒ‡æ ‡        | å«ä¹‰                           |
| ----------- | ------------------------------ |
| count       | éç©ºå€¼æ•°é‡ï¼ˆè¡Œæ•°ï¼‰             |
| mean        | å¹³å‡å€¼                         |
| std         | æ ‡å‡†å·®ï¼ˆè¡¡é‡æ³¢åŠ¨èŒƒå›´ï¼‰         |
| min/max     | æœ€å°å€¼ / æœ€å¤§å€¼                |
| 25%/50%/75% | åˆ†ä½æ•°ï¼ˆä¸­ä½æ•°ã€ä¸Šä¸‹å››åˆ†ä½ç‚¹ï¼‰ |



------

### âœ… æ€»ç»“å¯¹æ¯”ï¼š

| ä»£ç               | ä½œç”¨                         |
| ----------------- | ---------------------------- |
| `data.shape`      | æŸ¥çœ‹æ•°æ®çš„è¡Œæ•°å’Œåˆ—æ•°ï¼ˆç»´åº¦ï¼‰ |
| `data.describe()` | å¿«é€ŸæŸ¥çœ‹æ¯åˆ—æ•°å€¼çš„ç»Ÿè®¡åˆ†å¸ƒ   |



è¿™äº›æ˜¯æ•°æ®åˆ†æå’Œå»ºæ¨¡å‰çš„å¸¸è§„â€œæ•°æ®æ¢ç´¢â€æ­¥éª¤ï¼Œç”¨äºï¼š

- æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¼‚å¸¸å€¼æˆ–æç«¯å€¼
- äº†è§£æ•°æ®å¤§è‡´åˆ†å¸ƒ
- ä¸ºæ¸…æ´—ã€å½’ä¸€åŒ–ç­‰é¢„å¤„ç†åšå¥½å‡†å¤‡

å¦‚æœä½ éœ€è¦æˆ‘å¸®ä½ åŸºäºè¿™äº›ä¿¡æ¯è¿›ä¸€æ­¥å»ºæ¨¡æˆ–å¯è§†åŒ–åˆ†æï¼Œä¹Ÿå¯ä»¥ç»§ç»­å‘Šè¯‰æˆ‘ã€‚



##### æ‚¨è¯´ï¼š

ä»£ç ä½œç”¨# å¤„ç†æ—¶é—´çš„æ•°æ® time_value = pd.to_datetime(data['time'], unit='s') print(time_value.head(10))  #æœ€å¤§æ—¶é—´æ˜¯1æœˆ10å·



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š

------

### åŠŸèƒ½è¯´æ˜ï¼š

**å°†æ•°æ®ä¸­çš„æ—¶é—´æˆ³ï¼ˆæ•´æ•°ï¼‰è½¬æ¢ä¸ºæ›´æ˜“è¯»çš„æ—¥æœŸæ—¶é—´æ ¼å¼ï¼Œæ–¹ä¾¿åç»­åˆ†æå’Œå¤„ç†ã€‚**

------

### é€è¡Œè§£é‡Šï¼š

```
python


å¤åˆ¶ç¼–è¾‘
time_value = pd.to_datetime(data['time'], unit='s')
```

- `data['time']` æ˜¯åŸå§‹æ•°æ®ä¸­è¡¨ç¤ºæ—¶é—´çš„åˆ—ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæ•´æ•°æ—¶é—´æˆ³ï¼Œå•ä½æ˜¯**ç§’**ï¼ˆä»æŸä¸ªèµ·å§‹æ—¶é—´ç®—èµ·ï¼‰ã€‚
- `pd.to_datetime(..., unit='s')`ï¼š
  - Pandas å‡½æ•°ï¼Œå°†æ•´æ•°æ—¶é—´æˆ³è½¬æ¢æˆ **æ—¶é—´æ—¥æœŸæ ¼å¼ï¼ˆdatetimeï¼‰**ã€‚
  - `unit='s'` è¡¨ç¤ºæ—¶é—´æˆ³å•ä½æ˜¯ç§’ï¼ˆä¹Ÿå¯ä»¥æ˜¯æ¯«ç§’`'ms'`ç­‰ï¼‰ã€‚
- ç»“æœ `time_value` æ˜¯ä¸€ä¸ª `DatetimeIndex` æˆ– `Series`ï¼Œæ¯æ¡è®°å½•å¯¹åº”ä¸€ä¸ªå…·ä½“çš„æ—¥æœŸå’Œæ—¶é—´ã€‚

------

```
python


å¤åˆ¶ç¼–è¾‘
print(time_value.head(10))  # æœ€å¤§æ—¶é—´æ˜¯1æœˆ10å·
```

- æ‰“å°å‰ 10 æ¡è½¬æ¢åçš„æ—¥æœŸæ—¶é—´ï¼Œæ–¹ä¾¿è§‚å¯Ÿæ—¶é—´ä¿¡æ¯ã€‚
- æ³¨é‡Šä¸­æåˆ°â€œæœ€å¤§æ—¶é—´æ˜¯1æœˆ10å·â€ï¼Œæ„å‘³ç€æ•°æ®æ—¶é—´èŒƒå›´çº¦åœ¨ 1 æœˆ 1 æ—¥åˆ° 1 æœˆ 10 æ—¥ä¹‹é—´ã€‚

------

### ä¸¾ä¾‹ï¼š

å‡è®¾ `data['time']` æ˜¯ç±»ä¼¼ `3600`ã€`7200` è¿™æ ·çš„æ•´æ•°ï¼ˆç§’æ•°ï¼‰ï¼Œè½¬æ¢åå°±æ˜¯ï¼š

```
python-replå¤åˆ¶ç¼–è¾‘2025-01-01 01:00:00
2025-01-01 02:00:00
...
```

------

### æ€»ç»“ï¼š

è¿™æ®µä»£ç æŠŠ**åŸå§‹çš„ç§’çº§æ—¶é—´æˆ³**è½¬æˆäº†**äººç±»å¯è¯»çš„æ—¥æœŸæ—¶é—´æ ¼å¼**ï¼Œæ–¹ä¾¿åšæ—¶é—´åºåˆ—åˆ†æã€æ—¶é—´ç‰¹å¾æå–ï¼ˆå¦‚æå–å°æ—¶ã€æ˜ŸæœŸå‡ ç­‰ï¼‰ã€‚



3/3





##### æ‚¨è¯´ï¼š

\# æŠŠæ—¥æœŸæ ¼å¼è½¬æ¢æˆ å­—å…¸æ ¼å¼ï¼ŒæŠŠå¹´ï¼Œæœˆï¼Œæ—¥ï¼Œæ—¶ï¼Œåˆ†ï¼Œç§’è½¬æ¢ä¸ºå­—å…¸æ ¼å¼ï¼Œ time_value = pd.DatetimeIndex(time_value) # print('-' * 50) print(time_value[0:10])ä»£ç ä½œç”¨



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š

> **å°†æ—¶é—´åˆ—ï¼ˆæ—¶é—´æˆ³è½¬ä¸ºçš„ datetime æ ¼å¼ï¼‰è½¬æ¢ä¸ºä¸€ä¸ªç»“æ„åŒ–çš„ `DatetimeIndex` å¯¹è±¡ï¼Œä»¥ä¾¿ä»ä¸­æå–å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ç­‰å­—æ®µç”¨äºç‰¹å¾å·¥ç¨‹ã€‚**

------

### é€è¡Œè§£é‡Šå¦‚ä¸‹ï¼š

------

```
python


å¤åˆ¶ç¼–è¾‘
time_value = pd.DatetimeIndex(time_value)
```

- `pd.DatetimeIndex(...)` æ˜¯ Pandas ä¸­ç”¨äºå°†ä¸€ç»„ datetime æ•°æ®å°è£…ä¸ºä¸€ä¸ª **ç´¢å¼•å¯¹è±¡**ï¼Œå®ƒå…·å¤‡å¾ˆå¤šç»“æ„åŒ–çš„æ—¶é—´å±æ€§ã€‚
- åŸå§‹ `time_value` æ˜¯ä¸€ä¸ª `Series`ï¼ˆä¸€åˆ— datetime æ ¼å¼çš„æ—¶é—´ï¼‰ï¼›
- è½¬æ¢æˆ `DatetimeIndex` åï¼Œå¯ä»¥ç›´æ¥è®¿é—®å¦‚ä¸‹å­—æ®µï¼š
  - `time_value.year` å¹´
  - `time_value.month` æœˆ
  - `time_value.day` æ—¥
  - `time_value.hour` å°æ—¶
  - `time_value.minute` åˆ†é’Ÿ
  - `time_value.second` ç§’
  - `time_value.weekday` æ˜ŸæœŸå‡ ï¼ˆ0=å‘¨ä¸€ï¼Œ6=å‘¨æ—¥ï¼‰
  - `time_value.dayofyear` ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©

ğŸ“Œ âœ… è¿™ä¸ªè½¬æ¢çš„ä¸»è¦ç›®çš„ï¼š**ä¾¿äºæå–æ—¶é—´ç›¸å…³ç‰¹å¾**ï¼Œä¸ºæœºå™¨å­¦ä¹ æ¨¡å‹æä¾›æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚

------

```
pythonå¤åˆ¶ç¼–è¾‘print('-' * 50)
print(time_value[0:10])
```

- æ‰“å° 50 ä¸ª `-` ä½œä¸ºåˆ†éš”çº¿ï¼Œç¾åŒ–è¾“å‡ºï¼›
- æ‰“å°è½¬æ¢åçš„å‰ 10 ä¸ª `DatetimeIndex` æ—¶é—´å€¼ï¼Œç¤ºä¾‹è¾“å‡ºå¦‚ä¸‹ï¼š

```
python-replå¤åˆ¶ç¼–è¾‘2025-01-01 00:00:00
2025-01-01 00:01:00
...
```

------

### ğŸ” ç¤ºä¾‹ï¼šä» `DatetimeIndex` ä¸­æå–å­—æ®µ

ä½ æ¥ä¸‹æ¥å¯ä»¥å†™ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘data['day'] = time_value.day
data['hour'] = time_value.hour
data['weekday'] = time_value.weekday
```

ç”¨äºæ„é€ æ–°ç‰¹å¾ï¼Œæ¯”å¦‚ï¼š

- ç”¨æˆ·ç­¾åˆ°çš„æ—¶é—´æ˜¯ç™½å¤©è¿˜æ˜¯å¤œæ™šï¼Ÿ
- æ˜¯å·¥ä½œæ—¥è¿˜æ˜¯å‘¨æœ«ï¼Ÿ
- æ˜¯å“ªä¸ªå°æ—¶ç”¨æˆ·æœ€æ´»è·ƒï¼Ÿ

------

### âœ… æ€»ç»“ä¸€å¥è¯ï¼š

> è¿™æ®µä»£ç æŠŠæ—¶é—´åˆ—å˜æˆç»“æ„åŒ–æ—¶é—´ç´¢å¼•ï¼ˆ`DatetimeIndex`ï¼‰ï¼Œä¸ºåç»­**æå–å¹´/æœˆ/æ—¥/å°æ—¶ç­‰æ—¶é—´ç‰¹å¾**åšå¥½å‡†å¤‡ï¼Œæ˜¯å…¸å‹çš„æ—¶é—´ç‰¹å¾å·¥ç¨‹æ­¥éª¤ä¹‹ä¸€ã€‚



##### æ‚¨è¯´ï¼š

ä»£ç ä½œç”¨ï¼šprint('-' * 50) # æ„é€ ä¸€äº›ç‰¹å¾ï¼Œæ‰§è¡Œçš„è­¦å‘Šæ˜¯å› ä¸ºæˆ‘ä»¬çš„æ“ä½œæ˜¯å¤åˆ¶ï¼Œlocæ˜¯ç›´æ¥æ”¾å…¥ print(type(data)) # data['day'] = time_value.day # data['hour'] = time_value.hour # data['weekday'] = time_value.weekday #æ—¥æœŸï¼Œæ˜¯å¦æ˜¯å‘¨æœ«ï¼Œå°æ—¶å¯¹äºä¸ªäººè¡Œä¸ºçš„å½±å“æ˜¯è¾ƒå¤§çš„(ä¾‹å¦‚åƒé¥­æ—¶é—´å»é¥­åº—ï¼Œçœ‹ç”µå½±æ—¶é—´å»ç”µå½±é™¢ç­‰),æ‰€ä»¥æ‰åšä¸‹é¢çš„å¤„ç† data.insert(data.shape[1], 'day', time_value.day) #data.shape[1]æ˜¯ä»£è¡¨æ’å…¥åˆ°æœ€åçš„æ„æ€,ä¸€ä¸ªæœˆçš„å“ªä¸€å¤© data.insert(data.shape[1], 'hour', time_value.hour)#æ˜¯å¦å»ä¸€ä¸ªåœ°æ–¹æ‰“å¡ï¼Œæ—©ä¸Šï¼Œä¸­åˆï¼Œæ™šä¸Šæ˜¯æœ‰å½±å“çš„ data.insert(data.shape[1], 'weekday', time_value.weekday) #0ä»£è¡¨å‘¨ä¸€ï¼Œ6ä»£è¡¨å‘¨æ—¥ï¼Œæ˜ŸæœŸå‡  # # æŠŠæ—¶é—´æˆ³ç‰¹å¾åˆ é™¤ data = data.drop(['time'], axis=1) print('-' * 50) data.head()



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯å¯¹åŸå§‹ç­¾åˆ°æ•°æ®è¿›è¡Œ**æ—¶é—´ç‰¹å¾å·¥ç¨‹å¤„ç†**ï¼Œæå–å¯¹ç”¨æˆ·ç­¾åˆ°è¡Œä¸ºæœ‰æ˜¾è‘—å½±å“çš„æ—¶é—´ç»´åº¦ï¼ˆå¦‚ï¼š**æ—¥ã€å°æ—¶ã€æ˜ŸæœŸå‡ **ï¼‰ï¼Œå¹¶åˆ é™¤åŸå§‹çš„æ—¶é—´æˆ³å­—æ®µï¼Œæ•´ç†ä¸ºé€‚åˆç”¨äºå»ºæ¨¡çš„æ•°æ®æ ¼å¼ã€‚

ä¸‹é¢æ˜¯é€è¡Œè§£é‡Šï¼š

------

### ğŸ”¹ æ‰“å°åˆ†éš”çº¿

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

- ç”¨äºç¾åŒ–è¾“å‡ºï¼Œåˆ†éš”å†…å®¹ã€‚

------

### ğŸ” æ‰“å° DataFrame ç±»å‹

```
python


å¤åˆ¶ç¼–è¾‘
print(type(data))
```

- è¾“å‡º `data` çš„æ•°æ®ç±»å‹ï¼Œåº”è¯¥æ˜¯ï¼š

  ```
  python
  
  
  å¤åˆ¶ç¼–è¾‘
  <class 'pandas.core.frame.DataFrame'>
  ```

- è¡¨æ˜è¿™æ˜¯ä¸€ä¸ª Pandas è¡¨æ ¼ç»“æ„å¯¹è±¡ã€‚

------

### ğŸ”§ æ’å…¥æ–°ç‰¹å¾åˆ—ï¼ˆä»æ—¶é—´ä¸­æå–ï¼‰

```
python


å¤åˆ¶ç¼–è¾‘
data.insert(data.shape[1], 'day', time_value.day)
```

- `data.shape[1]` è¡¨ç¤ºå½“å‰åˆ—çš„æ€»æ•°ï¼ˆåœ¨æœ€åä¸€åˆ—åæ’å…¥ï¼‰ï¼›
- `'day'` è¡¨ç¤ºç­¾åˆ°çš„â€œå‡ å·â€ï¼ˆ1å·ã€2å·â€¦â€¦ï¼‰ï¼›
- `time_value.day` æ˜¯ä» `DatetimeIndex` ä¸­æå–çš„â€œå¤©â€å­—æ®µã€‚

ğŸ“Œ æ’å…¥ä½ç½®å¯ä»¥æ˜¯ä»»æ„åˆ—ç´¢å¼•ï¼Œè¿™é‡Œç”¨ `data.shape[1]` ä»£è¡¨ **æ’å…¥åˆ°æœ€åä¸€åˆ—**ã€‚

------

```
python


å¤åˆ¶ç¼–è¾‘
data.insert(data.shape[1], 'hour', time_value.hour)
```

- æ’å…¥ç­¾åˆ°çš„â€œå°æ—¶â€å­—æ®µï¼ˆ0~23ï¼‰ï¼Œè¡¨ç¤ºç”¨æˆ·åœ¨å“ªä¸ªæ—¶æ®µç­¾åˆ°ã€‚
- è¿™ä¸ªå¯¹ç”¨æˆ·è¡Œä¸ºéå¸¸å…³é”®ï¼š
  - æ¯”å¦‚æ—©ä¸Šå¸¸ç­¾åˆ°åœ°é“ç«™ã€ä¸­åˆç­¾åˆ°é¤å…ã€æ™šä¸Šç­¾åˆ°å½±é™¢ç­‰ã€‚

------

```
python


å¤åˆ¶ç¼–è¾‘
data.insert(data.shape[1], 'weekday', time_value.weekday)
```

- æ’å…¥ç­¾åˆ°çš„â€œæ˜ŸæœŸå‡ â€å­—æ®µï¼ˆ0=å‘¨ä¸€ï¼Œ6=å‘¨æ—¥ï¼‰ã€‚
- è¿™ç”¨äºåŒºåˆ†å·¥ä½œæ—¥å’Œå‘¨æœ«ç”¨æˆ·çš„è¡Œä¸ºå·®å¼‚ã€‚
  - ä¾‹å¦‚å·¥ä½œæ—¥é€šå‹¤ç­¾åˆ° vs å‘¨æœ«å¨±ä¹åœºæ‰€ç­¾åˆ°ã€‚

------

### ğŸ—‘ï¸ åˆ é™¤åŸå§‹æ—¶é—´æˆ³å­—æ®µ

```
python


å¤åˆ¶ç¼–è¾‘
data = data.drop(['time'], axis=1)
```

- åˆ é™¤åŸå§‹ `time` åˆ—ï¼ŒåŸå› æ˜¯ï¼š
  - å®ƒæ˜¯åŸå§‹çš„â€œç§’â€çº§æ•´æ•°ï¼Œä¸å¯è¯»ï¼›
  - æˆ‘ä»¬å·²ç»ä»å®ƒä¸­æå–å‡º `day`, `hour`, `weekday` è¿™äº›æ›´æœ‰ç”¨çš„ç‰¹å¾ï¼›
- `axis=1` è¡¨ç¤ºæŒ‰åˆ—åˆ é™¤ã€‚

------

### ğŸ”š æ‰“å°åˆ†éš”çº¿

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

------

### ğŸ‘€ æŸ¥çœ‹æ•°æ®å‰å‡ è¡Œ

```
python


å¤åˆ¶ç¼–è¾‘
data.head()
```

- æŸ¥çœ‹æ›´æ–°åçš„ DataFrame å‰ 5 è¡Œï¼Œç”¨äºç¡®è®¤ï¼š
  - æ–°å¢çš„æ—¶é—´ç‰¹å¾æ˜¯å¦æ’å…¥æˆåŠŸï¼›
  - åŸæ¥çš„ `time` å­—æ®µæ˜¯å¦åˆ é™¤ã€‚

------

### âœ… æ€»ç»“æ•´æ®µä»£ç ä½œç”¨ï¼š

| æ­¥éª¤         | è¯´æ˜                                        |
| ------------ | ------------------------------------------- |
| æå–æ—¶é—´å­—æ®µ | ä»åŸå§‹æ—¶é—´æˆ³ä¸­æå– `day`, `hour`, `weekday` |
| æ’å…¥æ–°åˆ—     | æŠŠè¿™äº›æ–°æ—¶é—´ç‰¹å¾æ·»åŠ åˆ°æ•°æ®çš„æœ«å°¾            |
| åˆ é™¤åŸæ—¶é—´æˆ³ | ç§»é™¤ä¸å†éœ€è¦çš„ `time` å­—æ®µ                  |
| å‡†å¤‡å»ºæ¨¡     | å¾—åˆ°æ›´æœ‰è§£é‡ŠåŠ›çš„æ—¶é—´ç‰¹å¾ï¼Œå¢å¼ºæ¨¡å‹æ€§èƒ½      |



------

è¿™äº›æ—¶é—´ç‰¹å¾åœ¨**ç”¨æˆ·è¡Œä¸ºé¢„æµ‹ã€ä½ç½®æ‰“å¡å»ºæ¨¡ã€KNNåˆ†ç±»ç­‰ä»»åŠ¡ä¸­éå¸¸å…³é”®**ï¼Œå› ä¸ºæ—¶é—´ä¸äººçš„æ´»åŠ¨é«˜åº¦ç›¸å…³ã€‚ä½ ç°åœ¨çš„åšæ³•æ˜¯æ ‡å‡†ã€åˆç†çš„â€œç‰¹å¾å·¥ç¨‹â€æ­¥éª¤ã€‚éœ€è¦çš„è¯ï¼Œæˆ‘è¿˜å¯ä»¥å¸®ä½ ç»§ç»­åšæ•°æ®æ ‡å‡†åŒ–ã€è®­ç»ƒæµ‹è¯•é›†åˆ’åˆ†å’Œ KNN å»ºæ¨¡ã€‚



##### æ‚¨è¯´ï¼š

print('-' * 50) # æ„é€ ä¸€äº›ç‰¹å¾ï¼Œæ‰§è¡Œçš„è­¦å‘Šæ˜¯å› ä¸ºæˆ‘ä»¬çš„æ“ä½œæ˜¯å¤åˆ¶ï¼Œlocæ˜¯ç›´æ¥æ”¾å…¥ print(type(data)) data['day'] = time_value.day data['hour'] = time_value.hour data['weekday'] = time_value.weekday #æ—¥æœŸï¼Œæ˜¯å¦æ˜¯å‘¨æœ«ï¼Œå°æ—¶å¯¹äºä¸ªäººè¡Œä¸ºçš„å½±å“æ˜¯è¾ƒå¤§çš„(ä¾‹å¦‚åƒé¥­æ—¶é—´å»é¥­åº—ï¼Œçœ‹ç”µå½±æ—¶é—´å»ç”µå½±é™¢ç­‰),æ‰€ä»¥æ‰åšä¸‹é¢çš„å¤„ç† data.insert(data.shape[1], 'day', time_value.day) #data.shape[1]æ˜¯ä»£è¡¨æ’å…¥åˆ°æœ€åçš„æ„æ€,ä¸€ä¸ªæœˆçš„å“ªä¸€å¤© data.insert(data.shape[1], 'hour', time_value.hour)#æ˜¯å¦å»ä¸€ä¸ªåœ°æ–¹æ‰“å¡ï¼Œæ—©ä¸Šï¼Œä¸­åˆï¼Œæ™šä¸Šæ˜¯æœ‰å½±å“çš„ data.insert(data.shape[1], 'weekday', time_value.weekday) #0ä»£è¡¨å‘¨ä¸€ï¼Œ6ä»£è¡¨å‘¨æ—¥ï¼Œæ˜ŸæœŸå‡  # # æŠŠæ—¶é—´æˆ³ç‰¹å¾åˆ é™¤ data = data.drop(['time'], axis=1) print('-' * 50) data.head()æœ‰å¦‚ä¸‹é—®é¢˜ï¼šValueError                                Traceback (most recent call last) Cell In[23], line 8      6 data['weekday'] = time_value.weekday      7 #æ—¥æœŸï¼Œæ˜¯å¦æ˜¯å‘¨æœ«ï¼Œå°æ—¶å¯¹äºä¸ªäººè¡Œä¸ºçš„å½±å“æ˜¯è¾ƒå¤§çš„(ä¾‹å¦‚åƒé¥­æ—¶é—´å»é¥­åº—ï¼Œçœ‹ç”µå½±æ—¶é—´å»ç”µå½±é™¢ç­‰),æ‰€ä»¥æ‰åšä¸‹é¢çš„å¤„ç† ----> 8 data.insert(data.shape[1], 'day', time_value.day) #data.shape[1]æ˜¯ä»£è¡¨æ’å…¥åˆ°æœ€åçš„æ„æ€,ä¸€ä¸ªæœˆçš„å“ªä¸€å¤©      9 data.insert(data.shape[1], 'hour', time_value.hour)#æ˜¯å¦å»ä¸€ä¸ªåœ°æ–¹æ‰“å¡ï¼Œæ—©ä¸Šï¼Œä¸­åˆï¼Œæ™šä¸Šæ˜¯æœ‰å½±å“çš„     10 data.insert(data.shape[1], 'weekday', time_value.weekday) #0ä»£è¡¨å‘¨ä¸€ï¼Œ6ä»£è¡¨å‘¨æ—¥ï¼Œæ˜ŸæœŸå‡  File ~\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\frame.py:5165, in DataFrame.insert(self, loc, column, value, allow_duplicates)   5159     raise ValueError(   5160         "Cannot specify 'allow_duplicates=True' when "   5161         "'self.flags.allows_duplicate_labels' is False."   5162     )   5163 if not allow_duplicates and column in self.columns:   5164     # Should this be a different kind of error?? -> 5165     raise ValueError(f"cannot insert {column}, already exists")   5166 if not is_integer(loc):   5167     raise TypeError("loc must be int") ValueError: cannot insert day, already exists



###### ChatGPT è¯´ï¼š

ä½ é‡åˆ°çš„æŠ¥é”™æ˜¯ï¼š

```
sql


å¤åˆ¶ç¼–è¾‘
ValueError: cannot insert day, already exists
```

### ğŸ§¨ æŠ¥é”™åŸå› ï¼š

ä½ å·²ç»åœ¨å‰é¢ç”¨ä»¥ä¸‹ä»£ç ç»™ `data` æ·»åŠ äº† `'day'`ã€`'hour'` å’Œ `'weekday'` ä¸‰åˆ—ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘data['day'] = time_value.day
data['hour'] = time_value.hour
data['weekday'] = time_value.weekday
```

ç„¶åä½ åˆé‡å¤ç”¨ `data.insert(...)` æƒ³å†æ’å…¥ä¸€éè¿™ä¸‰åˆ—ï¼Œä½†è¿™æ—¶å®ƒä»¬ **å·²ç»å­˜åœ¨äº†**ï¼Œæ‰€ä»¥ Pandas æŠ¥é”™è¯´ï¼š

> ä¸èƒ½æ’å…¥åˆ— `'day'`ï¼Œå› ä¸ºå®ƒå·²ç»å­˜åœ¨äº DataFrame ä¸­ã€‚

------

### âœ… æ­£ç¡®åšæ³•ï¼š**åªé€‰æ‹©ä¸€ç§æ–¹å¼æ·»åŠ åˆ—ï¼Œä¸è¦é‡å¤æ·»åŠ ï¼**

#### âœ… âœ… æ¨èæ–¹å¼ï¼ˆç®€å•ç›´è§‚ï¼‰â€”â€”ç›´æ¥èµ‹å€¼æ³•ï¼ˆä¸å†ç”¨ `insert()`ï¼‰ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘print('-' * 50)
print(type(data))

# ç›´æ¥é€šè¿‡èµ‹å€¼æ·»åŠ æ–°åˆ—ï¼ˆæ¨èï¼‰
data['day'] = time_value.day
data['hour'] = time_value.hour
data['weekday'] = time_value.weekday

# åˆ é™¤åŸå§‹çš„æ—¶é—´æˆ³åˆ—
data = data.drop(['time'], axis=1)

print('-' * 50)
data.head()
```

------

### ğŸ“ å¯¹æ¯”ä¸¤ç§æ–¹å¼ï¼š

| æ–¹æ³•         | å†™æ³•                           | æ˜¯å¦å…è®¸è¦†ç›–åŒååˆ—       |
| ------------ | ------------------------------ | ------------------------ |
| âœ… ç›´æ¥èµ‹å€¼æ³• | `data['day'] = ...`            | å…è®¸ï¼Œæ¨èä½¿ç”¨           |
| âŒ `insert()` | `data.insert(..., 'day', ...)` | ä¸å…è®¸ï¼Œè‹¥åˆ—å·²å­˜åœ¨ä¼šæŠ¥é”™ |



------

### ğŸ› ï¸ å¦‚æœä½ åšæŒä½¿ç”¨ `insert()`ï¼Œå¯ä»¥å…ˆåˆ¤æ–­åˆ—æ˜¯å¦å­˜åœ¨ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘if 'day' not in data.columns:
    data.insert(data.shape[1], 'day', time_value.day)
```

ä½†åœ¨å®é™…å·¥ä½œä¸­ï¼Œ**æ¨èç”¨ç®€å•èµ‹å€¼æ³•**ï¼Œæ›´çµæ´»æ›´å®‰å…¨ã€‚

------

### âœ… æ€»ç»“ï¼š

ä½ æŠ¥é”™çš„åŸå› æ˜¯é‡å¤æ’å…¥å·²å­˜åœ¨çš„åˆ—ï¼ˆ`'day'`ã€`'hour'`ã€`'weekday'`ï¼‰ã€‚
 è¯·åˆ æ‰ `insert(...)` çš„éƒ¨åˆ†ï¼Œä¿ç•™å‰é¢çš„èµ‹å€¼è¯­å¥å³å¯ï¼Œç¨‹åºå°±ä¸ä¼šæŠ¥é”™äº† âœ…ã€‚éœ€è¦æˆ‘å¸®ä½ æ•´ç†æˆå®Œæ•´æ— è¯¯çš„ä»£ç ä¹Ÿå¯ä»¥å‘Šè¯‰æˆ‘ã€‚



##### æ‚¨è¯´ï¼š

KeyError                                  Traceback (most recent call last) Cell In[24], line 14      6 data['weekday'] = time_value.weekday      7 #æ—¥æœŸï¼Œæ˜¯å¦æ˜¯å‘¨æœ«ï¼Œå°æ—¶å¯¹äºä¸ªäººè¡Œä¸ºçš„å½±å“æ˜¯è¾ƒå¤§çš„(ä¾‹å¦‚åƒé¥­æ—¶é—´å»é¥­åº—ï¼Œçœ‹ç”µå½±æ—¶é—´å»ç”µå½±é™¢ç­‰),æ‰€ä»¥æ‰åšä¸‹é¢çš„å¤„ç†      8 # data.insert(data.shape[1], 'day', time_value.day) #data.shape[1]æ˜¯ä»£è¡¨æ’å…¥åˆ°æœ€åçš„æ„æ€,ä¸€ä¸ªæœˆçš„å“ªä¸€å¤©      9 # data.insert(data.shape[1], 'hour', time_value.hour)#æ˜¯å¦å»ä¸€ä¸ªåœ°æ–¹æ‰“å¡ï¼Œæ—©ä¸Šï¼Œä¸­åˆï¼Œæ™šä¸Šæ˜¯æœ‰å½±å“çš„   (...)     12 #     13 # æŠŠæ—¶é—´æˆ³ç‰¹å¾åˆ é™¤ ---> 14 data = data.drop(['time'], axis=1)     15 print('-' * 50)     16 data.head() File ~\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\frame.py:5588, in DataFrame.drop(self, labels, axis, index, columns, level, inplace, errors)   5440 def drop(   5441     self,   5442     labels: IndexLabel | None = None,   (...)   5449     errors: IgnoreRaise = "raise",   5450 ) -> DataFrame | None:   5451     """   5452     Drop specified labels from rows or columns.   5453    (...)   5586             weight  1.0     0.8   5587     """ -> 5588     return super().drop(   5589         labels=labels,   5590         axis=axis,   5591         index=index,   5592         columns=columns,   5593         level=level,   5594         inplace=inplace,   5595         errors=errors,   5596     ) File ~\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\generic.py:4807, in NDFrame.drop(self, labels, axis, index, columns, level, inplace, errors)   4805 for axis, labels in axes.items():   4806     if labels is not None: -> 4807         obj = obj._drop_axis(labels, axis, level=level, errors=errors)   4809 if inplace:   4810     self._update_inplace(obj) File ~\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\generic.py:4849, in NDFrame._drop_axis(self, labels, axis, level, errors, only_slice)   4847         new_axis = axis.drop(labels, level=level, errors=errors)   4848     else: -> 4849         new_axis = axis.drop(labels, errors=errors)   4850     indexer = axis.get_indexer(new_axis)   4852 # Case for non-unique axis   4853 else: File ~\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\i



###### ChatGPT è¯´ï¼š

ä½ ç°åœ¨é‡åˆ°çš„é”™è¯¯æ˜¯ï¼š

```
vbnet


å¤åˆ¶ç¼–è¾‘
KeyError: "['time'] not found in axis"
```

------

### â— é”™è¯¯åŸå› ï¼š

ä½ å†™äº†è¿™è¡Œä»£ç ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
data = data.drop(['time'], axis=1)
```

æ„æ€æ˜¯ä»åˆ—ä¸­åˆ é™¤ `'time'` å­—æ®µã€‚

ä½†æŠ¥é”™è¯´æ˜ï¼š

> `DataFrame` ä¸­ **å·²ç»æ²¡æœ‰åä¸º `'time'` çš„åˆ—äº†**ï¼Œæ‰€ä»¥ Pandas æŠ¥é”™è¯´æ‰¾ä¸åˆ°è¯¥åˆ—ã€‚

------

### âœ… è§£å†³æ–¹æ³•ï¼š

åœ¨è°ƒç”¨ `.drop()` åˆ é™¤åˆ—ä¹‹å‰ï¼Œ**å…ˆç¡®è®¤è¿™ä¸ªåˆ—æ˜¯å¦å­˜åœ¨**ï¼Œæœ‰ä¸¤ç§å¸¸ç”¨æ–¹å¼ï¼š

------

#### âœ… æ–¹æ³• 1ï¼šä½¿ç”¨ `errors='ignore'`ï¼Œå³ä½¿åˆ—ä¸å­˜åœ¨ä¹Ÿä¸æŠ¥é”™ï¼ˆæœ€æ¨èï¼‰

```
python


å¤åˆ¶ç¼–è¾‘
data = data.drop(['time'], axis=1, errors='ignore')
```

è¿™æ ·å³ä½¿ `'time'` ä¸å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œä»£ç æ›´å¥å£®ã€‚

------

#### âœ… æ–¹æ³• 2ï¼šå…ˆåˆ¤æ–­åˆ—åæ˜¯å¦åœ¨ DataFrame ä¸­å†åˆ 

```
pythonå¤åˆ¶ç¼–è¾‘if 'time' in data.columns:
    data = data.drop(['time'], axis=1)
```

------

### ğŸ“Œ é™„å¸¦è¯´æ˜ï¼šä½ å‰é¢å¯èƒ½å·²ç»æ‰§è¡Œè¿‡ä¸€æ¬¡ `.drop(['time'])`ï¼Œæˆ–è€…å·²ç»åœ¨å…¶ä»–å•å…ƒæ ¼ä¸­åˆ è¿‡è¿™ä¸ªå­—æ®µï¼Œæ‰€ä»¥å†æ¬¡åˆ å°±æŠ¥é”™äº†ã€‚

------

### âœ… æœ€ç»ˆæ¨èä»£ç ï¼ˆç®€æ´å®‰å…¨ï¼‰ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘# åˆ é™¤æ—¶é—´åˆ—ï¼Œå¦‚æœå·²ä¸å­˜åœ¨ä¹Ÿä¸æŠ¥é”™
data = data.drop(['time'], axis=1, errors='ignore')
```

------

éœ€è¦æˆ‘å¸®ä½ æ•´ç†æˆå®Œæ•´ä¸æŠ¥é”™çš„æ¸…æ´—ä¸ç‰¹å¾æå–ä»£ç å—ï¼Ÿå¯ä»¥ä¸€é”®è¿è¡Œä¸å‡ºé”™çš„ç‰ˆæœ¬ ğŸ‘ã€‚







##### æ‚¨è¯´ï¼š

x_train, x_test, y_train, y_test = train_test_split(li.data, li.target, test_size=0.25, random_state=1) print("è®­ç»ƒé›†ç‰¹å¾å€¼å’Œç›®æ ‡å€¼ï¼š", x_train, y_train) print("è®­ç»ƒé›†ç‰¹å¾å€¼shape", x_train.shape) print('-'*50)è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ä»€ä¹ˆ  print("æµ‹è¯•é›†ç‰¹å¾å€¼å’Œç›®æ ‡å€¼ï¼š", x_test, y_test) print("æµ‹è¯•é›†ç‰¹å¾å€¼shape", x_test.shape)



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ•°æ®é›†ï¼ˆ`li.data` ä¸ºç‰¹å¾å€¼ï¼Œ`li.target` ä¸ºç›®æ ‡å€¼ï¼‰**æŒ‰æ¯”ä¾‹åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†**ï¼Œå¹¶æ‰“å°åˆ’åˆ†åçš„æ•°æ®å†…å®¹åŠå…¶å½¢çŠ¶ã€‚ä¸‹é¢æ˜¯é€è¡Œè§£é‡Šï¼š

------

### 1ï¸âƒ£ æ•°æ®åˆ’åˆ†ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
x_train, x_test, y_train, y_test = train_test_split(li.data, li.target, test_size=0.25, random_state=1)
```

**å«ä¹‰ï¼š**

- `train_test_split` æ˜¯ sklearn ä¸­çš„å‡½æ•°ï¼Œç”¨æ¥**å°†åŸå§‹æ•°æ®é›†éšæœºåˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†**ã€‚
- `li.data`ï¼šæ ·æœ¬çš„ç‰¹å¾ï¼ˆäºŒç»´æ•°ç»„ï¼‰
- `li.target`ï¼šå¯¹åº”çš„æ ‡ç­¾ï¼ˆç›®æ ‡å€¼ï¼‰
- `test_size=0.25`ï¼šè¡¨ç¤º 25% çš„æ•°æ®ä½œä¸ºæµ‹è¯•é›†ï¼Œ75% ä½œä¸ºè®­ç»ƒé›†
- `random_state=1`ï¼šè®¾ç½®éšæœºç§å­ï¼Œä¿è¯æ¯æ¬¡åˆ’åˆ†çš„ç»“æœä¸€è‡´ï¼ˆå¯å¤ç°ï¼‰

------

### 2ï¸âƒ£ æ‰“å°è®­ç»ƒé›†å†…å®¹ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘print("è®­ç»ƒé›†ç‰¹å¾å€¼å’Œç›®æ ‡å€¼ï¼š", x_train, y_train)
print("è®­ç»ƒé›†ç‰¹å¾å€¼shape", x_train.shape)
```

**å«ä¹‰ï¼š**

- è¾“å‡ºåˆ’åˆ†å¾—åˆ°çš„è®­ç»ƒé›†ç‰¹å¾ï¼ˆ`x_train`ï¼‰å’Œç›®æ ‡å€¼ï¼ˆ`y_train`ï¼‰
- è¾“å‡ºè®­ç»ƒé›†ç‰¹å¾çš„ç»´åº¦ä¿¡æ¯ï¼ˆshapeï¼‰ï¼Œä¾‹å¦‚ `(112, 4)`ï¼Œè¡¨ç¤ºæœ‰112æ¡æ•°æ®ï¼Œæ¯æ¡æ•°æ®æœ‰4ä¸ªç‰¹å¾ã€‚

------

### 3ï¸âƒ£ åˆ†å‰²çº¿ï¼ˆç¾åŒ–è¾“å‡ºï¼‰ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
print('-'*50)
```

**ä½œç”¨ï¼š**

- æ‰“å°ä¸€æ¡ç”± 50 ä¸ª `-` ç»„æˆçš„åˆ†å‰²çº¿ï¼Œæ–¹ä¾¿åŒºåˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„è¾“å‡ºã€‚

------

### 4ï¸âƒ£ æ‰“å°æµ‹è¯•é›†å†…å®¹ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘print("æµ‹è¯•é›†ç‰¹å¾å€¼å’Œç›®æ ‡å€¼ï¼š", x_test, y_test)
print("æµ‹è¯•é›†ç‰¹å¾å€¼shape", x_test.shape)
```

**å«ä¹‰ï¼š**

- è¾“å‡ºåˆ’åˆ†å¾—åˆ°çš„æµ‹è¯•é›†ç‰¹å¾ï¼ˆ`x_test`ï¼‰å’Œç›®æ ‡å€¼ï¼ˆ`y_test`ï¼‰
- è¾“å‡ºæµ‹è¯•é›†ç‰¹å¾çš„ç»´åº¦ä¿¡æ¯ï¼ˆshapeï¼‰ï¼Œä¾‹å¦‚ `(38, 4)`ï¼Œè¡¨ç¤ºæœ‰38æ¡æµ‹è¯•æ•°æ®ã€‚

------

### ğŸ” æ€»ç»“ï¼š

è¿™æ®µä»£ç çš„æ€»ä½“ä½œç”¨æ˜¯ï¼š

> å°†ä¸€ä¸ªæ•°æ®é›†åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œå¹¶æ‰“å°å®ƒä»¬çš„å†…å®¹å’Œç»´åº¦ä¿¡æ¯ï¼Œç”¨äºåç»­çš„æ¨¡å‹è®­ç»ƒå’Œè¯„ä¼°ã€‚

å¦‚æœä½ æ˜¯åœ¨å¤„ç†æœºå™¨å­¦ä¹ ä»»åŠ¡ï¼Œæ¯”å¦‚é¸¢å°¾èŠ±åˆ†ç±»ã€æ‰‹å†™æ•°å­—è¯†åˆ«ç­‰ï¼Œè¿™æ˜¯éå¸¸å¸¸è§çš„å‡†å¤‡æ­¥éª¤ä¹‹ä¸€ã€‚



##### æ‚¨è¯´ï¼š

ä¸ºä»€ä¹ˆè®¾ç½®random_state=1



###### ChatGPT è¯´ï¼š

è®¾ç½® `random_state=1` çš„ç›®çš„æ˜¯ï¼š

> **è®© `train_test_split()` åœ¨æ¯æ¬¡è¿è¡Œæ—¶åˆ’åˆ†å‡ºçš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†å§‹ç»ˆä¸€è‡´ï¼ˆå¯å¤ç°ï¼‰**ã€‚

------

### ğŸ“Œ èƒŒæ™¯è§£é‡Šï¼š

`train_test_split()` é»˜è®¤æ˜¯**éšæœºåˆ’åˆ†æ•°æ®**çš„ã€‚å¦‚æœä½ ä¸è®¾ç½® `random_state`ï¼Œæ¯æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼Œåˆ’åˆ†çš„ç»“æœéƒ½å¯èƒ½ä¸åŒï¼Œå¯¼è‡´ï¼š

- è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸åŒï¼›
- æ¨¡å‹è®­ç»ƒç»“æœå¯èƒ½å˜åŒ–ï¼›
- ä¸æ–¹ä¾¿è°ƒè¯•å’Œå¯¹æ¯”ä¸åŒæ¨¡å‹ã€‚

------

### âœ… è®¾ç½® `random_state=1` å¸¦æ¥çš„å¥½å¤„ï¼š

| é¡¹ç›®             | å«ä¹‰                                          |
| ---------------- | --------------------------------------------- |
| `random_state=1` | æŒ‡å®šäº†éšæœºç§å­ä¸º 1                            |
| ç¨³å®šæ€§           | æ¯æ¬¡åˆ’åˆ†ç»“æœéƒ½ç›¸åŒ                            |
| å¯å¯¹æ¯”æ€§         | å¤šæ¬¡è®­ç»ƒç»“æœå¯æ¯”è¾ƒã€å¯å¤æŸ¥                    |
| å¯å¤ç°æ€§         | åˆ«äººè¿è¡Œä½ çš„ä»£ç æ—¶ä¹Ÿèƒ½å¾—åˆ°åŒæ ·çš„è®­ç»ƒ/æµ‹è¯•æ•°æ® |



ä½ å¯ä»¥ç†è§£ä¸ºï¼š

> `random_state` å°±åƒæ˜¯â€œæ´—ç‰Œçš„å¯†ç â€ï¼Œç›¸åŒçš„å¯†ç æ¯æ¬¡æ´—å‡ºçš„ç‰Œé¡ºåºéƒ½ä¸€æ ·ã€‚

------

### ğŸ’¡ è¡¥å……è¯´æ˜ï¼š

ä½ å¯ä»¥è®¾ç½®ä¸ºä»»æ„æ•´æ•°ï¼ˆå¦‚ 0ã€1ã€42 éƒ½å¯ä»¥ï¼‰ï¼Œåªè¦åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ç»Ÿä¸€å³å¯ã€‚ä¾‹å¦‚ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
random_state=42  # ä¹Ÿæ˜¯å¾ˆå¤šæ•™ç¨‹å’Œè®ºæ–‡å–œæ¬¢ç”¨çš„é»˜è®¤å€¼
```

------

### â— å¦‚æœä½ ä¸è®¾ç½® `random_state` ä¼šæ€æ ·ï¼Ÿ

```
python


å¤åˆ¶ç¼–è¾‘
train_test_split(..., test_size=0.25)
```

è¿™æ ·æ¯æ¬¡è¿è¡Œç¨‹åºï¼Œå¾—åˆ°çš„ `x_train`, `x_test` éƒ½å¯èƒ½ä¸åŒï¼Œå¯¼è‡´ç»“æœä¸ç¨³å®šã€‚

------

### âœ… æ€»ç»“ä¸€å¥è¯ï¼š

> è®¾ç½® `random_state=1` æ˜¯ä¸ºäº†ç¡®ä¿æ•°æ®åˆ’åˆ†å¯é‡å¤ã€ç»“æœå¯æ¯”è¾ƒï¼Œæ˜¯è‰¯å¥½çš„æœºå™¨å­¦ä¹ å®è·µä¹‹ä¸€ã€‚



##### æ‚¨è¯´ï¼š

train_test_split(li.data, li.target, test_size=0.25, random_state=1)å‡½æ•°çš„è¿”å›å€¼é¡ºåº



###### ChatGPT è¯´ï¼š

å‡½æ•° `train_test_split(li.data, li.target, test_size=0.25, random_state=1)` çš„è¿”å›å€¼é¡ºåºæ˜¯ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
x_train, x_test, y_train, y_test
```

ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒè¿”å›çš„æ˜¯**è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„ç‰¹å¾å€¼ä¸ç›®æ ‡å€¼ï¼ŒæŒ‰ç…§ä»¥ä¸‹é¡ºåºæ’åˆ—**ï¼š

| è¿”å›å€¼    | å«ä¹‰                       |
| --------- | -------------------------- |
| `x_train` | è®­ç»ƒé›†çš„ç‰¹å¾æ•°æ®ï¼ˆç‰¹å¾å€¼ï¼‰ |
| `x_test`  | æµ‹è¯•é›†çš„ç‰¹å¾æ•°æ®           |
| `y_train` | è®­ç»ƒé›†çš„ç›®æ ‡æ•°æ®ï¼ˆæ ‡ç­¾ï¼‰   |
| `y_test`  | æµ‹è¯•é›†çš„ç›®æ ‡æ•°æ®           |



------

### âœ… ä¸¾ä¸ªä¾‹å­ï¼š

å‡è®¾ä½ å†™äº†å¦‚ä¸‹ä»£ç ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘from sklearn.model_selection import train_test_split
from sklearn.datasets import load_iris

li = load_iris()
x_train, x_test, y_train, y_test = train_test_split(li.data, li.target, test_size=0.25, random_state=1)
```

åˆ™ï¼š

- `x_train.shape` æ˜¯ `(112, 4)`ï¼Œè®­ç»ƒé›†ä¸­æœ‰ 112 æ¡æ ·æœ¬ï¼Œæ¯æ¡æœ‰ 4 ä¸ªç‰¹å¾ï¼›
- `x_test.shape` æ˜¯ `(38, 4)`ï¼Œæµ‹è¯•é›†ä¸­æœ‰ 38 æ¡æ ·æœ¬ï¼›
- `y_train.shape` æ˜¯ `(112,)`ï¼Œç›®æ ‡æ ‡ç­¾æ˜¯ 1D æ•°ç»„ï¼›
- `y_test.shape` æ˜¯ `(38,)`ã€‚

------

### ğŸ“Œ æ³¨æ„ï¼š

`train_test_split()` æ”¯æŒä¼ å…¥å¤šä¸ªæ•°ç»„ï¼Œä¼š**æŒ‰ç›¸åŒçš„æ–¹å¼æ‹†åˆ†è¿™äº›æ•°ç»„**ï¼Œè¿”å›å€¼çš„é¡ºåºä¸ä¼ å…¥é¡ºåºä¸€è‡´ã€‚ä¾‹å¦‚ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
x1_train, x1_test, x2_train, x2_test = train_test_split(x1, x2, test_size=0.25)
```

å°±æ˜¯åˆ†åˆ«å¯¹ `x1` å’Œ `x2` åšç›¸åŒåˆ’åˆ†ï¼Œè¿”å› `x1_train`, `x1_test`, `x2_train`, `x2_test`ã€‚

------

### âœ… æ€»ç»“ï¼š

> `train_test_split(data, target)` é»˜è®¤è¿”å›å€¼é¡ºåºæ˜¯ï¼š
>  `x_train`, `x_test`, `y_train`, `y_test`ï¼ˆ**è®­ç»ƒç‰¹å¾ã€æµ‹è¯•ç‰¹å¾ã€è®­ç»ƒæ ‡ç­¾ã€æµ‹è¯•æ ‡ç­¾**ï¼‰ã€‚
>  ä½ åº”è¯¥æŒ‰ç…§è¿™ä¸ªé¡ºåºè¿›è¡Œå˜é‡æ¥æ”¶ã€‚



##### æ‚¨è¯´ï¼š

\# ä¸‹é¢æ˜¯æ¯”è¾ƒå¤§çš„æ•°æ®ï¼Œéœ€è¦ä¸‹è½½ä¸€ä¼šï¼Œ20ç±»æ–°é—» #subsetä»£è¡¨ä¸‹è½½çš„æ•°æ®é›†ç±»å‹ï¼Œé»˜è®¤æ˜¯trainï¼Œåªæœ‰è®­ç»ƒé›† news = fetch_20newsgroups(subset='all', data_home='data') # print(news.feature_names)  #è¿™ä¸ªæ•°æ®é›†æ˜¯æ²¡æœ‰çš„ï¼Œå› ä¸ºæ²¡æœ‰ç‰¹å¾ï¼Œåªæœ‰æ–‡æœ¬æ•°æ® # print(news.DESCR) print('ç¬¬ä¸€ä¸ªæ ·æœ¬') print(news.data[0]) print('ç‰¹å¾ç±»å‹') print(type(news.data)) print('-' * 50) print(news.target[0:15]) from pprint import pprint pprint(list(news.target_names))ä¸Šé¢ä»£ç çš„ä½œç”¨



###### ChatGPT è¯´ï¼š

ä½ è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š

> **ä¸‹è½½å¹¶åŠ è½½ 20 ç±»æ–°é—»æ–‡æœ¬æ•°æ®é›†ï¼ˆ`20newsgroups`ï¼‰ï¼Œå¹¶æŸ¥çœ‹éƒ¨åˆ†å†…å®¹ã€ç±»å‹å’Œç›®æ ‡åˆ†ç±»ä¿¡æ¯**ã€‚

ä¸‹é¢æˆ‘æ¥é€è¡Œè§£é‡Šï¼š

------

### âœ… 1. ä¸‹è½½æ–°é—»æ•°æ®é›†

```
pythonå¤åˆ¶ç¼–è¾‘from sklearn.datasets import fetch_20newsgroups

news = fetch_20newsgroups(subset='all', data_home='data')
```

- `fetch_20newsgroups(...)` æ˜¯ sklearn æä¾›çš„å‡½æ•°ï¼Œç”¨äºä¸‹è½½**20ç±»æ–°é—»æ•°æ®é›†**ã€‚
- `subset='all'`ï¼šè¡¨ç¤ºä¸‹è½½ **å…¨éƒ¨æ•°æ®**ï¼ˆåŒ…æ‹¬è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼‰ã€‚
  - ä¹Ÿå¯ä»¥è®¾ä¸º `'train'` æˆ– `'test'`
- `data_home='data'`ï¼šæŒ‡å®šæŠŠæ•°æ®å­˜åˆ° `data/` ç›®å½•ä¸‹ï¼Œé¿å…é‡å¤ä¸‹è½½ã€‚

ğŸ“Œ **æ•°æ®ç»“æ„è¯´æ˜ï¼š**
 è¿”å›çš„æ˜¯ä¸€ä¸ª `sklearn.utils.Bunch` å¯¹è±¡ï¼Œç±»ä¼¼äºå­—å…¸ï¼Œæœ‰ä»¥ä¸‹å¸¸ç”¨å­—æ®µï¼š

| å­—æ®µå         | å«ä¹‰                           |
| -------------- | ------------------------------ |
| `data`         | æ‰€æœ‰æ–°é—»æ–‡æœ¬åˆ—è¡¨ï¼ˆå­—ç¬¦ä¸²ï¼‰     |
| `target`       | æ¯æ¡æ–°é—»å¯¹åº”çš„ç±»åˆ«ç¼–å·ï¼ˆ0~19ï¼‰ |
| `target_names` | ç±»åˆ«ç¼–å·å¯¹åº”çš„ç±»åï¼ˆå…± 20 ä¸ªï¼‰ |



------

### âœ… 2. æŸ¥çœ‹ç¬¬ä¸€ä¸ªæ–°é—»æ ·æœ¬å†…å®¹

```
pythonå¤åˆ¶ç¼–è¾‘print('ç¬¬ä¸€ä¸ªæ ·æœ¬')
print(news.data[0])
```

- æ‰“å°å‡ºç¬¬ä¸€æ¡æ–°é—»çš„åŸå§‹æ–‡æœ¬å†…å®¹ï¼ˆçº¯æ–‡æœ¬ï¼‰ã€‚

------

### âœ… 3. æŸ¥çœ‹æ•°æ®ç±»å‹

```
pythonå¤åˆ¶ç¼–è¾‘print('ç‰¹å¾ç±»å‹')
print(type(news.data))
```

- è¾“å‡º `news.data` çš„ç±»å‹ï¼Œé€šå¸¸æ˜¯ `list`ï¼Œå…¶ä¸­æ¯ä¸€é¡¹æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå³ä¸€ç¯‡æ–‡ç« ï¼‰ã€‚

------

### âœ… 4. æ‰“å°ç›®æ ‡å€¼å‰ 15 ä¸ª

```
pythonå¤åˆ¶ç¼–è¾‘print('-' * 50)
print(news.target[0:15])
```

- `news.target` æ˜¯ä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œå¯¹åº”æ¯ç¯‡æ–°é—»çš„**ç±»åˆ«ç¼–å·**ã€‚
- è¿™è¡Œä»£ç æ‰“å°å‰ 15 ç¯‡æ–‡ç« å¯¹åº”çš„ç±»åˆ«ç¼–å·ã€‚

------

### âœ… 5. æ‰“å°æ‰€æœ‰çš„ç±»åˆ«åç§°ï¼ˆå³æ–°é—»ä¸»é¢˜ï¼‰

```
pythonå¤åˆ¶ç¼–è¾‘from pprint import pprint
pprint(list(news.target_names))
```

- `news.target_names` æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰ 20 ä¸ªæ–°é—»ç±»åˆ«çš„åç§°ï¼ˆå­—ç¬¦ä¸²ï¼‰ã€‚
- `pprint()` å¯ä»¥æ›´æ¸…æ™°åœ°æ‰“å°åˆ—è¡¨ï¼Œæ ¼å¼æ›´æ•´é½ã€‚

------

### ğŸ“š ç¤ºä¾‹è¾“å‡ºï¼ˆå¯èƒ½é•¿è¿™æ ·ï¼‰ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘ç¬¬ä¸€ä¸ªæ ·æœ¬
From: lerxst@wam.umd.edu (where's my thing)
Subject: WHAT car is this!?
...
ç‰¹å¾ç±»å‹
<class 'list'>
--------------------------------------------------
[7, 4, 4, 1, 14, 16, 3, 4, 4, 1, 4, 4, 2, 4, 5]
['alt.atheism',
 'comp.graphics',
 'comp.os.ms-windows.misc',
 'comp.sys.ibm.pc.hardware',
 ...
 'talk.religion.misc']
```

------

### âœ… æ€»ç»“ï¼š

è¿™æ®µä»£ç æ˜¯ä¸ºäº†ï¼š

1. **åŠ è½½å¹¶æŸ¥çœ‹ 20 ç±»æ–°é—»æ•°æ®é›†**ï¼›
2. **äº†è§£æ•°æ®ç»“æ„ï¼ˆæ–‡æœ¬å†…å®¹ + ç±»åˆ«ç¼–å·ï¼‰**ï¼›
3. **ä¸ºåç»­åšæ–‡æœ¬åˆ†ç±»æ‰“å¥½åŸºç¡€ï¼ˆå¦‚ TF-IDF ç‰¹å¾æå–ã€æ¨¡å‹è®­ç»ƒç­‰ï¼‰**ã€‚

è¯¥æ•°æ®é›†å¸¸ç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰å®éªŒï¼Œå°¤å…¶é€‚åˆåšæ–‡æœ¬åˆ†ç±»ã€ä¸»é¢˜è¯†åˆ«ç­‰ä»»åŠ¡ã€‚



##### æ‚¨è¯´ï¼š

ä¸ºä»€ä¹ˆæ¯ç¯‡æ–°é—»è¦æœ‰ç±»åˆ«ç¼–å·



###### ChatGPT è¯´ï¼š

æ¯ç¯‡æ–°é—»éƒ½æœ‰**ç±»åˆ«ç¼–å·**ï¼Œæ˜¯å› ä¸ºï¼š

> ğŸ“Œ **æˆ‘ä»¬éœ€è¦â€œç›®æ ‡æ ‡ç­¾â€æ¥ç›‘ç£æ¨¡å‹è¿›è¡Œåˆ†ç±»å­¦ä¹ ã€‚**

ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œç±»åˆ«ç¼–å·å°±æ˜¯æˆ‘ä»¬è¦è®©æ¨¡å‹å­¦ä¼šâ€œé¢„æµ‹â€çš„å¯¹è±¡ã€‚

------

### ğŸ” ç±»åˆ«ç¼–å·çš„ä½œç”¨ï¼šæ ‡ç­¾ï¼

æœºå™¨å­¦ä¹ ç‰¹åˆ«æ˜¯ç›‘ç£å­¦ä¹ ä¸­ï¼Œæ¯æ¡æ•°æ®å¿…é¡»åŒ…æ‹¬ï¼š

| æˆåˆ†      | å«ä¹‰                     | ä¸¾ä¾‹                                           |
| --------- | ------------------------ | ---------------------------------------------- |
| ç‰¹å¾ï¼ˆXï¼‰ | å¯ç”¨æ¥åˆ¤æ–­çš„ä¿¡æ¯ï¼ˆè¾“å…¥ï¼‰ | æ–°é—»å†…å®¹ï¼Œå¦‚â€œiPhone å‘å¸ƒæ–°æ¬¾â€¦â€                 |
| æ ‡ç­¾ï¼ˆyï¼‰ | æ­£ç¡®ç­”æ¡ˆï¼ˆè¾“å‡ºç›®æ ‡ï¼‰     | æ–°é—»ç±»åˆ«ç¼–å·ï¼Œä¾‹å¦‚ 3 = `comp.sys.mac.hardware` |



------

### âœ… ä¸ºä»€ä¹ˆè¦ç”¨ç¼–å·ï¼ˆæ•´æ•°ï¼‰è¡¨ç¤ºç±»åˆ«ï¼Ÿ

è™½ç„¶ç±»åˆ«æœ¬èº«æ˜¯å­—ç¬¦ä¸²ï¼ˆå¦‚ `sci.space`, `comp.graphics`ï¼‰ï¼Œä½†æˆ‘ä»¬ç”¨æ•°å­—æ¥è¡¨ç¤ºæœ‰å¾ˆå¤šä¼˜åŠ¿ï¼š

| å¥½å¤„             | è¯´æ˜                                                 |
| ---------------- | ---------------------------------------------------- |
| ğŸš€ å¿«é€Ÿå¤„ç†       | æ•°å­—æ›´é€‚åˆæ¨¡å‹å¤„ç†ï¼Œé¿å…å­—ç¬¦ä¸²å¸¦æ¥çš„é¢å¤–å¼€é”€         |
| ğŸ¤– æ¨¡å‹å…¼å®¹       | å¤§å¤šæ•°æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚ SVMã€é€»è¾‘å›å½’ï¼‰è¦æ±‚ç›®æ ‡æ˜¯æ•°å­— |
| âœ… æ˜“ç¼–ç          | æ–¹ä¾¿ç”¨ `y == 3` è¿™æ ·çš„æ–¹å¼ç­›é€‰æ•°æ®                   |
| ğŸ¯ å¯æ˜ å°„å›å­—ç¬¦ä¸² | å¯ä»¥é€šè¿‡ `target_names[y]` æŠŠç¼–å·è½¬å›ç±»åˆ«åç§°        |



------

### ğŸ§  ä¸¾ä¸ªä¾‹å­ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘æ–°é—»å†…å®¹: "NASA releases new satellite data..."
ç±»åˆ«ç¼–å·: 15
ç±»åˆ«åç§°: 'sci.space'
```

æ¨¡å‹ä¼šå­¦ä¹ ï¼šå‡¡æ˜¯å‡ºç°åƒ "NASA", "satellite", "space" è¿™æ ·çš„å…³é”®è¯ï¼Œå¤§æ¦‚ç‡ç±»åˆ«ç¼–å·å°±æ˜¯ 15ã€‚

------

### ğŸ” åˆ†ç±»ä»»åŠ¡å°±æ˜¯å­¦ä¼šï¼šæ–‡æœ¬ âœ ç±»åˆ«ç¼–å·

æ¨¡å‹è®­ç»ƒç›®æ ‡ï¼š

- è¾“å…¥ï¼šä¸€ç¯‡æ–°é—»æ–‡æœ¬ï¼ˆå­—ç¬¦ä¸²ï¼‰
- è¾“å‡ºï¼šä¸€ä¸ªæ•°å­—ï¼ˆç±»åˆ«ç¼–å·ï¼‰

æœ€ç»ˆæˆ‘ä»¬å¸Œæœ›æ¨¡å‹èƒ½**é¢„æµ‹å‡ºä»»æ„æ–°æ–‡ç« çš„æ­£ç¡®ç±»åˆ«ç¼–å·**ã€‚

------

### âœ… æ€»ç»“ä¸€å¥è¯ï¼š

> ç±»åˆ«ç¼–å·æ˜¯æ¯ç¯‡æ–°é—»çš„â€œæ­£ç¡®æ ‡ç­¾â€ï¼Œæ˜¯æ–‡æœ¬åˆ†ç±»æ¨¡å‹å­¦ä¹ å’Œè¯„ä¼°çš„åŸºç¡€ã€‚
>  ç”¨æ•°å­—è€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¾¿äºæ¨¡å‹å¤„ç†ã€é«˜æ•ˆè®­ç»ƒï¼Œå¹¶å¯ä»¥è½»æ¾ä¸ç±»åˆ«åç§°ä¸€ä¸€å¯¹åº”ã€‚



##### æ‚¨è¯´ï¼š

print('-' * 50) print(len(news.data)) print('æ–°é—»æ‰€æœ‰çš„æ ‡ç­¾') print(news.target) print('-' * 50)ä»£ç ä½œç”¨  print(min(news.target), max(news.target))



###### ChatGPT è¯´ï¼š

ä¸‹é¢æˆ‘ä»¬æ¥é€è¡Œè§£é‡Šä½ è¿™æ®µä»£ç çš„ä½œç”¨ï¼Œå®ƒæ˜¯ç”¨æ¥**æŸ¥çœ‹20ç±»æ–°é—»æ•°æ®é›†ï¼ˆ`news`ï¼‰çš„åŸºæœ¬ä¿¡æ¯**çš„ï¼š

------

### ğŸ”¢ ä»£ç è§£æå¦‚ä¸‹ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

- æ‰“å°ä¸€æ¡åˆ†éš”çº¿ï¼Œç”± 50 ä¸ª `-` ç»„æˆã€‚
- ä½œç”¨ï¼šè®©è¾“å‡ºç»“æœæ›´æ¸…æ™°ã€ç¾è§‚ï¼Œä¾¿äºé˜…è¯»ã€‚

------

```
python


å¤åˆ¶ç¼–è¾‘
print(len(news.data))
```

- è¾“å‡ºï¼š**æ•°æ®é›†ä¸­æ–°é—»çš„æ€»æ•°**ã€‚
- `news.data` æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰æ–‡æœ¬æ–°é—»ã€‚
- `len(news.data)` è¡¨ç¤ºä¸€å…±æœ‰å¤šå°‘æ¡æ–°é—»æ ·æœ¬ã€‚

âœ… æ¯”å¦‚ï¼šè¾“å‡ºå¯èƒ½æ˜¯ `18846`ï¼Œè¡¨ç¤ºæ•°æ®é›†ä¸­æœ‰ **18846 æ¡æ–°é—»æ–‡ç« **ã€‚

------

```
pythonå¤åˆ¶ç¼–è¾‘print('æ–°é—»æ‰€æœ‰çš„æ ‡ç­¾')
print(news.target)
```

- `news.target` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œ**æ¯ä¸€æ¡æ–°é—»å¯¹åº”ä¸€ä¸ªæ•°å­—æ ‡ç­¾ï¼ˆç±»åˆ«ç¼–å·ï¼‰**ã€‚
- æ‰“å°å‡ºæ¥çš„ç»“æœç±»ä¼¼è¿™æ ·ï¼š

```
text


å¤åˆ¶ç¼–è¾‘
[10  3 17 ... 3  1  5]
```

è¿™è¯´æ˜ï¼š

- ç¬¬ 1 æ¡æ–°é—»æ˜¯ç¬¬ 10 ç±»
- ç¬¬ 2 æ¡æ˜¯ç¬¬ 3 ç±»
- ç¬¬ 3 æ¡æ˜¯ç¬¬ 17 ç±»ï¼Œâ€¦â€¦
- ä¸€å…±æœ‰ 20 ç±»ï¼Œç¼–å·ä» 0 åˆ° 19

------

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

- åˆæ˜¯ä¸€æ¡åˆ†éš”çº¿ï¼Œç”¨äºåˆ†éš”è¾“å‡ºå†…å®¹ã€‚

------

```
python


å¤åˆ¶ç¼–è¾‘
print(min(news.target), max(news.target))
```

- è¾“å‡ºï¼š`news.target` ä¸­çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œä¹Ÿå°±æ˜¯ï¼š
  - æ‰€æœ‰ç±»åˆ«ç¼–å·ä¸­**æœ€å°çš„ç¼–å·**
  - æ‰€æœ‰ç±»åˆ«ç¼–å·ä¸­**æœ€å¤§çš„ç¼–å·**

âœ… åœ¨ 20 ç±»æ–°é—»ä¸­ï¼Œè¾“å‡ºé€šå¸¸æ˜¯ï¼š

```
text


å¤åˆ¶ç¼–è¾‘
0 19
```

è¡¨ç¤ºï¼š

- ç±»åˆ«ç¼–å·ä» 0 å¼€å§‹
- åˆ° 19 ç»“æŸï¼Œä¸€å…± **20 ç±»æ–°é—»**

------

### ğŸ“¦ æ€»ç»“ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š

> **æŸ¥çœ‹æ•°æ®é›†ä¸­æ–°é—»æ•°é‡ã€æ¯æ¡æ–°é—»çš„æ ‡ç­¾ã€ä»¥åŠæ ‡ç­¾ç¼–å·çš„èŒƒå›´ã€‚**

| ä»£ç                                  | ä½œç”¨è¯´æ˜                 |
| ------------------------------------ | ------------------------ |
| `len(news.data)`                     | è¾“å‡ºæ–°é—»æ¡æ•°             |
| `news.target`                        | æ‰€æœ‰æ–°é—»çš„æ ‡ç­¾ç¼–å·       |
| `min(news.target), max(news.target)` | æ ‡ç­¾ç¼–å·çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ |



è¿™äº›ä¿¡æ¯å¯¹äº†è§£æ•°æ®ç»“æ„éå¸¸é‡è¦ï¼Œæ˜¯**æ–‡æœ¬åˆ†ç±»ä»»åŠ¡çš„ç¬¬ä¸€æ­¥ï¼šæ•°æ®ç†è§£ä¸æ£€æŸ¥**ã€‚



##### æ‚¨è¯´ï¼š

house=fetch_california_housing(data_home='data') print("è·å–ç‰¹å¾å€¼") print(house.data[0])  #ç¬¬ä¸€ä¸ªæ ·æœ¬ç‰¹å¾å€¼ print('æ ·æœ¬çš„å½¢çŠ¶') print(house.data.shape)ä»£ç ä½œç”¨  print('-' * 50)



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç æ˜¯ç”¨æ¥**åŠ è½½åŠ å·æˆ¿ä»·æ•°æ®é›†ï¼ˆCalifornia Housingï¼‰å¹¶æŸ¥çœ‹éƒ¨åˆ†ç‰¹å¾ä¿¡æ¯**çš„ã€‚ä¸‹é¢é€è¡Œè§£é‡Šå…¶å…·ä½“ä½œç”¨ï¼š

------

### ğŸ” 1. åŠ è½½æ•°æ®é›†

```
pythonå¤åˆ¶ç¼–è¾‘from sklearn.datasets import fetch_california_housing

house = fetch_california_housing(data_home='data')
```

- `fetch_california_housing()`ï¼šä» sklearn ä¸‹è½½ **åŠ å·æˆ¿ä»·æ•°æ®é›†**ã€‚
- `data_home='data'`ï¼šæŠŠæ•°æ®ä¿å­˜åˆ°æœ¬åœ°çš„ `data/` ç›®å½•ï¼Œé¿å…é‡å¤ä¸‹è½½ã€‚
- è¿”å›å€¼ `house` æ˜¯ä¸€ä¸ª `Bunch` å¯¹è±¡ï¼Œç±»ä¼¼äºå­—å…¸ï¼ŒåŒ…å«å¦‚ä¸‹å†…å®¹ï¼š

| å­—æ®µ            | å«ä¹‰                                   |
| --------------- | -------------------------------------- |
| `data`          | æ ·æœ¬çš„ç‰¹å¾ï¼ˆäºŒç»´æ•°ç»„ï¼‰                 |
| `target`        | æ¯ä¸ªæ ·æœ¬çš„æˆ¿ä»·ï¼ˆç›®æ ‡å€¼ï¼Œå•ä½æ˜¯åƒç¾å…ƒï¼‰ |
| `feature_names` | æ¯ä¸ªç‰¹å¾çš„åç§°ï¼ˆå¦‚æ”¶å…¥ã€æˆ¿é—´æ•°ç­‰ï¼‰     |
| `DESCR`         | æ•°æ®é›†çš„æè¿°æ–‡æœ¬                       |



------

### ğŸ” 2. æ‰“å°ç¬¬ä¸€ä¸ªæ ·æœ¬çš„ç‰¹å¾å€¼

```
pythonå¤åˆ¶ç¼–è¾‘print("è·å–ç‰¹å¾å€¼")
print(house.data[0])  # ç¬¬ä¸€ä¸ªæ ·æœ¬çš„ç‰¹å¾å€¼
```

- è¾“å‡ºåŠ å·æˆ¿ä»·æ•°æ®é›†ä¸­ç¬¬ä¸€ä¸ªæ ·æœ¬çš„ 8 ä¸ªç‰¹å¾å€¼ï¼Œä¾‹å¦‚ï¼š

```
text


å¤åˆ¶ç¼–è¾‘
[8.3252e+00 4.1000e+01 6.9841e+00 1.0238e+00 3.2200e+02 2.5556e+00 3.7880e+01 9.4300e+00]
```

è¿™äº›ç‰¹å¾åŒ…æ‹¬ï¼š

1. äººå‡æ”¶å…¥
2. æˆ¿å±‹å¹´é¾„ä¸­ä½æ•°
3. å¹³å‡æˆ¿é—´æ•°
4. å¹³å‡å§å®¤æ•°
5. å±…æ°‘æ•°é‡
6. å¹³å‡å®¶åº­äººæ•°
7. ç»åº¦
8. çº¬åº¦

------

### ğŸ” 3. æ‰“å°æ•°æ®çš„å½¢çŠ¶

```
pythonå¤åˆ¶ç¼–è¾‘print('æ ·æœ¬çš„å½¢çŠ¶')
print(house.data.shape)
```

- æ‰“å°çš„æ˜¯ `data` çš„å½¢çŠ¶ï¼Œé€šå¸¸æ˜¯ï¼š

```
text


å¤åˆ¶ç¼–è¾‘
(20640, 8)
```

æ„æ€æ˜¯ï¼šæ•°æ®é›†ä¸­ä¸€å…±æœ‰ **20640 ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬æœ‰ 8 ä¸ªç‰¹å¾**ã€‚

------

### ğŸ” 4. åˆ†å‰²çº¿ï¼ˆç¾åŒ–è¾“å‡ºï¼‰

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

- æ‰“å°å‡ºä¸€æ¡ç”± 50 ä¸ª `-` ç»„æˆçš„åˆ†éš”çº¿ï¼Œç”¨äºåˆ†éš”è¾“å‡ºå†…å®¹ï¼Œæå‡å¯è¯»æ€§ã€‚

------

### âœ… æ€»ç»“

| ä»£ç                          | ä½œç”¨                                    |
| ---------------------------- | --------------------------------------- |
| `fetch_california_housing()` | ä¸‹è½½å¹¶åŠ è½½åŠ å·æˆ¿ä»·æ•°æ®                  |
| `house.data[0]`              | æŸ¥çœ‹ç¬¬ä¸€ä¸ªæ ·æœ¬çš„ç‰¹å¾å€¼                  |
| `house.data.shape`           | æŸ¥çœ‹æ‰€æœ‰æ•°æ®çš„è¡Œåˆ—æ•°ï¼ˆæ ·æœ¬æ•° Ã— ç‰¹å¾æ•°ï¼‰ |
| `print('-'*50)`              | è¾“å‡ºåˆ†éš”çº¿                              |



------

è¿™ä¸ªæ•°æ®é›†å¸¸ç”¨äº**å›å½’æ¨¡å‹è®­ç»ƒ**ï¼Œç›®æ ‡æ˜¯é¢„æµ‹æ¯ä¸ªåŒºåŸŸçš„å¹³å‡æˆ¿ä»·ã€‚



##### æ‚¨è¯´ï¼š

print("ç›®æ ‡å€¼") print(house.target) print('-' * 50) print(house.DESCR) print('-' * 50) print(house.feature_names) print('-' * 50)ä»£ç ä½œç”¨



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š**æŸ¥çœ‹ California Housingï¼ˆåŠ å·æˆ¿ä»·ï¼‰æ•°æ®é›†ä¸­çš„ç›®æ ‡å€¼ã€æ•°æ®æè¿°ã€ç‰¹å¾åç§°**ã€‚ä¸‹é¢æ˜¯é€è¡Œè®²è§£ï¼š

------

### 1ï¸âƒ£ æŸ¥çœ‹ç›®æ ‡å€¼ï¼ˆæˆ¿ä»·ï¼‰

```
pythonå¤åˆ¶ç¼–è¾‘print("ç›®æ ‡å€¼")
print(house.target)
```

- `house.target` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºæ¯æ¡æ ·æœ¬çš„**æˆ¿ä»·ä¸­ä½æ•°**ï¼ˆå•ä½æ˜¯ï¼šåƒç¾å…ƒï¼‰ã€‚

- ç¤ºä¾‹è¾“å‡ºï¼ˆå‰å‡ é¡¹ï¼‰ï¼š

  ```
  python
  
  
  å¤åˆ¶ç¼–è¾‘
  [4.526 3.585 3.521 ... 0.923 0.847 0.894]
  ```

- è¯´æ˜ï¼š

  - ç¬¬ 1 ä¸ªæ ·æœ¬çš„æˆ¿ä»·ä¸º $4.526 ä¸‡ç¾å…ƒ
  - ç¬¬ 2 ä¸ªæ ·æœ¬çš„æˆ¿ä»·ä¸º $3.585 ä¸‡ç¾å…ƒ
  - â€¦â€¦

âœ… è¿™æ˜¯è®­ç»ƒå›å½’æ¨¡å‹çš„ç›®æ ‡ï¼ˆy å€¼ï¼‰ã€‚

------

### 2ï¸âƒ£ æ‰“å°åˆ†éš”çº¿

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

- ç¾åŒ–è¾“å‡ºï¼Œè®©å†…å®¹ç»“æ„æ›´æ¸…æ™°ã€‚

------

### 3ï¸âƒ£ æŸ¥çœ‹æ•°æ®é›†çš„æ•´ä½“æè¿°

```
python


å¤åˆ¶ç¼–è¾‘
print(house.DESCR)
```

- `house.DESCR` æ˜¯å­—ç¬¦ä¸²ï¼ŒåŒ…å«æ•´ä¸ªæ•°æ®é›†çš„è¯¦ç»†ä»‹ç»ï¼ŒåŒ…æ‹¬ï¼š
  - æ•°æ®æ¥æº
  - ç‰¹å¾è§£é‡Š
  - ç»Ÿè®¡ä¿¡æ¯
  - ä½¿ç”¨å»ºè®®

ğŸ“ ç¤ºä¾‹å†…å®¹ç‰‡æ®µï¼ˆå¯èƒ½å¾ˆé•¿ï¼‰ï¼š

```
mathematicaå¤åˆ¶ç¼–è¾‘.. _california_housing_dataset:

California Housing dataset
---------------------------

**Data Set Characteristics:**

    :Number of Instances: 20640
    :Number of Attributes: 8 numeric, predictive attributes and the target
    ...
```

âœ… è¿™ä¸ªå­—æ®µéå¸¸æœ‰ç”¨ï¼Œå¯ä»¥å¿«é€Ÿäº†è§£æ•°æ®èƒŒæ™¯å’Œç”¨é€”ã€‚

------

### 4ï¸âƒ£ å†æ¬¡æ‰“å°åˆ†éš”çº¿

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

------

### 5ï¸âƒ£ æŸ¥çœ‹æ‰€æœ‰ç‰¹å¾åç§°

```
python


å¤åˆ¶ç¼–è¾‘
print(house.feature_names)
```

- è¾“å‡ºçš„æ˜¯åˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰ç‰¹å¾çš„åå­—ï¼ˆæ€»å…± 8 ä¸ªï¼‰ï¼Œä¾‹å¦‚ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
['MedInc', 'HouseAge', 'AveRooms', 'AveBedrms', 'Population', 'AveOccup', 'Latitude', 'Longitude']
```

ğŸ“Œ è§£é‡Šå¦‚ä¸‹ï¼š

| ç‰¹å¾å       | å«ä¹‰                     |
| ------------ | ------------------------ |
| `MedInc`     | åŒºåŸŸä½æˆ·çš„**æ”¶å…¥ä¸­ä½æ•°** |
| `HouseAge`   | æˆ¿å±‹çš„**å¹´é¾„ä¸­ä½æ•°**     |
| `AveRooms`   | æ¯æˆ·çš„**å¹³å‡æˆ¿é—´æ•°**     |
| `AveBedrms`  | æ¯æˆ·çš„**å¹³å‡å§å®¤æ•°**     |
| `Population` | åŒºåŸŸå†…**äººå£æ•°é‡**       |
| `AveOccup`   | å¹³å‡æ¯ä¸ªå®¶åº­çš„äººå£æ•°     |
| `Latitude`   | åŒºåŸŸçš„**çº¬åº¦**           |
| `Longitude`  | åŒºåŸŸçš„**ç»åº¦**           |



------

### âœ… æ€»ç»“åŠŸèƒ½è¡¨ï¼š

| ä»£ç                   | åŠŸèƒ½è¯´æ˜                   |
| --------------------- | -------------------------- |
| `house.target`        | æŸ¥çœ‹æ‰€æœ‰æ ·æœ¬å¯¹åº”çš„æˆ¿ä»·æ ‡ç­¾ |
| `house.DESCR`         | æŸ¥çœ‹æ•°æ®é›†è¯¦ç»†ä»‹ç»         |
| `house.feature_names` | æŸ¥çœ‹ 8 ä¸ªç‰¹å¾çš„åç§°åˆ—è¡¨    |
| `print('-'*50)`       | ç”¨äºåˆ†éš”è¾“å‡ºå†…å®¹ï¼Œä¾¿äºé˜…è¯» |



------

è¿™äº›ä»£ç å¸¸ç”¨äº **æ•°æ®åŠ è½½ä¸ç†è§£é˜¶æ®µ**ï¼Œå¸®åŠ©ä½ æŒæ¡æ¨¡å‹è®­ç»ƒæ‰€ä¾èµ–çš„æ•°æ®ç»“æ„å’Œå«ä¹‰ã€‚



##### æ‚¨è¯´ï¼š

\# Kè¿‘é‚» """ K-è¿‘é‚»é¢„æµ‹ç”¨æˆ·ç­¾åˆ°ä½ç½® :return:None """ # è¯»å–æ•°æ® data = pd.read_csv("./data/FBlocation/train.csv") print(data.head(10)) print(data.shape) print(data.info()) # å¤„ç†æ•°æ® # 1ã€ç¼©å°æ•°æ®,æŸ¥è¯¢æ•°æ®,ä¸ºäº†å‡å°‘è®¡ç®—æ—¶é—´ data = data.query("x > 1.0 &  x < 1.25 & y > 2.5 & y < 2.75")ä»£ç ä½œç”¨



###### ChatGPT è¯´ï¼š

ä½ è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ä½¿ç”¨ **Kè¿‘é‚»ç®—æ³•ï¼ˆKNNï¼‰é¢„æµ‹ç”¨æˆ·ç­¾åˆ°ä½ç½®**ï¼Œå¹¶åœ¨å¼€å§‹é˜¶æ®µå¯¹åŸå§‹æ•°æ®è¿›è¡Œè¯»å–å’Œç­›é€‰å¤„ç†ã€‚ä¸‹é¢æˆ‘é€è¡Œè§£é‡Šä»£ç çš„ä½œç”¨ï¼š

------

### ğŸ” ä¸€ã€Kè¿‘é‚»é¢„æµ‹ç­¾åˆ°ä½ç½®

```
pythonå¤åˆ¶ç¼–è¾‘"""
K-è¿‘é‚»é¢„æµ‹ç”¨æˆ·ç­¾åˆ°ä½ç½®
:return: None
"""
```

è¿™æ˜¯ä¸€ä¸ªæ–‡æ¡£å­—ç¬¦ä¸²ï¼Œç”¨æ¥è¯´æ˜æ•´ä¸ªä»£ç åŠŸèƒ½ï¼š

- åˆ©ç”¨ **K-è¿‘é‚»ç®—æ³•** å¯¹ **ç”¨æˆ·åœ¨æŸä¸ªä½ç½®ç­¾åˆ°çš„ä½ç½®ç‚¹** è¿›è¡Œé¢„æµ‹åˆ†ç±»ã€‚

------

### ğŸ“¥ äºŒã€è¯»å–åŸå§‹æ•°æ®

```
pythonå¤åˆ¶ç¼–è¾‘# è¯»å–æ•°æ®
data = pd.read_csv("./data/FBlocation/train.csv")
```

- ä½¿ç”¨ Pandas è¯»å–æœ¬åœ°è·¯å¾„ä¸‹çš„ `train.csv` æ•°æ®æ–‡ä»¶ï¼Œå­˜å…¥å˜é‡ `data`ã€‚
- æ•°æ®æ¥æºæ˜¯ Facebook Check-in çš„ä½ç½®ç­¾åˆ°æ•°æ®é›†ï¼ŒåŒ…å«ç”¨æˆ·åæ ‡å’Œç­¾åˆ°ä½ç½®ç­‰ä¿¡æ¯ã€‚

------

### ğŸ‘€ ä¸‰ã€æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯

```
python


å¤åˆ¶ç¼–è¾‘
print(data.head(10))
```

- æ‰“å°å‰ 10 æ¡æ•°æ®ï¼ŒæŸ¥çœ‹åŸå§‹æ•°æ®æ ¼å¼ä¸å†…å®¹ã€‚

```
python


å¤åˆ¶ç¼–è¾‘
print(data.shape)
```

- è¾“å‡ºæ•°æ®çš„å½¢çŠ¶ï¼Œå¦‚ `(291180, 10)` è¡¨ç¤ºæœ‰ 291180 æ¡è®°å½•ï¼Œ10 ä¸ªå­—æ®µã€‚

```
python


å¤åˆ¶ç¼–è¾‘
print(data.info())
```

- æ‰“å°æ¯ä¸€åˆ—çš„ç±»å‹ã€æ˜¯å¦æœ‰ç¼ºå¤±å€¼ï¼Œç”¨äº**æ•°æ®åˆæ­¥äº†è§£å’Œæ¸…æ´—å‡†å¤‡**ã€‚

------

### ğŸ§¹ å››ã€æ•°æ®é¢„å¤„ç† - ç­›é€‰ä¸€ä¸ªå°åŒºåŸŸ

```
pythonå¤åˆ¶ç¼–è¾‘# 1ã€ç¼©å°æ•°æ®,æŸ¥è¯¢æ•°æ®,ä¸ºäº†å‡å°‘è®¡ç®—æ—¶é—´
data = data.query("x > 1.0 & x < 1.25 & y > 2.5 & y < 2.75")
```

- ä½¿ç”¨ Pandas çš„ `.query()` æ–¹æ³•ç­›é€‰å‡ºåœ°ç†ä½ç½®åœ¨æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®ï¼š
  - `x` è¡¨ç¤ºæ¨ªåæ ‡ï¼ˆç»åº¦ç±»ä¼¼ï¼‰ï¼Œå–å€¼åœ¨ 1.0 åˆ° 1.25 ä¹‹é—´ï¼›
  - `y` è¡¨ç¤ºçºµåæ ‡ï¼ˆçº¬åº¦ç±»ä¼¼ï¼‰ï¼Œå–å€¼åœ¨ 2.5 åˆ° 2.75 ä¹‹é—´ã€‚
- åŸå› ï¼šè¯¥æ•°æ®é›†æœ¬èº«æ•°æ®é‡å¾ˆå¤§ï¼Œä¸ºäº†å‡å°‘åç»­è®­ç»ƒæ—¶é—´ï¼Œæˆ‘ä»¬**åªå–ä¸€ä¸ªå°èŒƒå›´çš„ç”¨æˆ·ä½ç½®åŒºåŸŸ**æ¥åšå®éªŒã€‚

ğŸ“Œ ç­›é€‰åçš„æ•°æ®å°±æ˜¯åªåŒ…å«é‚£ä¸€å°å—åŒºåŸŸä¸­çš„ç”¨æˆ·ç­¾åˆ°ç‚¹ï¼Œç”¨äºæœ¬åœ°èŒƒå›´å†…çš„åˆ†ç±»é¢„æµ‹ã€‚

------

### âœ… æ€»ç»“æ•´æ®µä»£ç ä½œç”¨ï¼š

| æ­¥éª¤       | ç›®çš„                             |
| ---------- | -------------------------------- |
| è¯»å–æ•°æ®é›† | åŠ è½½åŸå§‹ç­¾åˆ°æ•°æ®                 |
| æ‰“å°ä¿¡æ¯   | æŸ¥çœ‹æ•°æ®è§„æ¨¡ä¸ç»“æ„               |
| ç­›é€‰åæ ‡   | ä»…é€‰å–éƒ¨åˆ†åŒºåŸŸç”¨äºå®éªŒï¼Œæå‡æ•ˆç‡ |
| åç»­ç›®æ ‡   | ä½¿ç”¨ KNN æ¨¡å‹é¢„æµ‹ç­¾åˆ°ä½ç½®åˆ†ç±»    |



------

å¦‚æœä½ ç»§ç»­å¾€ä¸‹å†™ï¼Œä¼šä½¿ç”¨ `KNeighborsClassifier` å»ºæ¨¡ï¼Œç”¨ `x`, `y`, `accuracy`, `time` ç­‰ç‰¹å¾å»é¢„æµ‹ `place_id`ï¼ˆå³ç”¨æˆ·ç­¾åˆ°çš„çœŸå®ä½ç½®ï¼‰ã€‚éœ€è¦æ ‡å‡†åŒ–ã€åˆ’åˆ†è®­ç»ƒé›†ã€æ„å»ºæ¨¡å‹ç­‰åç»­æ­¥éª¤ã€‚éœ€è¦æˆ‘ç»§ç»­å¸®ä½ å†™åç»­ KNN æ¨¡å‹æµç¨‹å—ï¼Ÿ



##### æ‚¨è¯´ï¼š

è§£é‡Šä¸€ä¸‹ï¼š<class 'pandas.core.frame.DataFrame'> RangeIndex: 29118021 entries, 0 to 29118020 Data columns (total 6 columns): #   Column    Dtype   ---  ------    -----   0   row_id    int64   1   x         float64 2   y         float64 3   accuracy  int64   4   time      int64   5   place_id  int64   dtypes: float64(2), int64(4) memory usage: 1.3 GB None



###### ChatGPT è¯´ï¼š

ä½ æä¾›çš„æ˜¯ Pandas ä¸­ `DataFrame.info()` çš„è¾“å‡ºç»“æœï¼Œä¸‹é¢æ˜¯å¯¹å®ƒæ¯ä¸€éƒ¨åˆ†çš„è¯¦ç»†è§£é‡Šï¼š

------

### âœ… è¿™æ˜¯ DataFrame çš„åŸºæœ¬ä¿¡æ¯ï¼š

```
javascript


å¤åˆ¶ç¼–è¾‘
<class 'pandas.core.frame.DataFrame'>
```

ğŸ“Œ è¡¨ç¤ºï¼š`data` æ˜¯ä¸€ä¸ª Pandas çš„ **DataFrame** å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªäºŒç»´çš„è¡¨æ ¼ç»“æ„ï¼Œç±»ä¼¼ Excel è¡¨æ ¼æˆ– SQL è¡¨ã€‚

------

### âœ… è¡Œç´¢å¼•ä¿¡æ¯ï¼š

```
pgsql


å¤åˆ¶ç¼–è¾‘
RangeIndex: 29118021 entries, 0 to 29118020
```

- ä¸€å…±æœ‰ **29,118,021 æ¡æ•°æ®**ï¼ˆè¡Œï¼‰ï¼Œç¼–å·ä» 0 åˆ° 29118020ã€‚
- ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„ `RangeIndex`ï¼Œå³æ•´æ•°é€’å¢çš„è¡Œç´¢å¼•ã€‚

------

### âœ… åˆ—ä¿¡æ¯ï¼ˆå­—æ®µ + æ•°æ®ç±»å‹ï¼‰ï¼š

```
goå¤åˆ¶ç¼–è¾‘Data columns (total 6 columns):
 #   Column    Dtype  
---  ------    -----  
 0   row_id    int64  
 1   x         float64
 2   y         float64
 3   accuracy  int64  
 4   time      int64  
 5   place_id  int64  
```

| åˆ—å· | åˆ—å       | ç±»å‹      | å«ä¹‰è¯´æ˜                               |
| ---- | ---------- | --------- | -------------------------------------- |
| 0    | `row_id`   | `int64`   | è¡Œç¼–å·æˆ–æ ·æœ¬ç¼–å·ï¼ˆå”¯ä¸€ IDï¼‰            |
| 1    | `x`        | `float64` | æ¨ªåæ ‡ï¼ˆåœ°ç†åæ ‡ä¸­çš„ xï¼Œå•ä½ç±»ä¼¼ç»åº¦ï¼‰ |
| 2    | `y`        | `float64` | çºµåæ ‡ï¼ˆåœ°ç†åæ ‡ä¸­çš„ yï¼Œå•ä½ç±»ä¼¼çº¬åº¦ï¼‰ |
| 3    | `accuracy` | `int64`   | GPS ç²¾åº¦ï¼ˆæ•°å€¼è¶Šå¤§ï¼Œå¯èƒ½è¶Šä¸ç²¾ç¡®ï¼‰     |
| 4    | `time`     | `int64`   | æ—¶é—´æˆ³ï¼ˆå•ä½ä¸ºåˆ†é’Ÿï¼‰                   |
| 5    | `place_id` | `int64`   | ç­¾åˆ°ä½ç½®ç¼–å·ï¼ˆé¢„æµ‹ç›®æ ‡æ ‡ç­¾ï¼‰           |



------

### âœ… æ¯ç§æ•°æ®ç±»å‹ç»Ÿè®¡ï¼š

```
css


å¤åˆ¶ç¼–è¾‘
dtypes: float64(2), int64(4)
```

- è¡¨ç¤ºä¸€å…± 6 åˆ—ä¸­ï¼š
  - æœ‰ **2 åˆ—** æ˜¯ `float64` ç±»å‹ï¼ˆå³å°æ•°ï¼Œç²¾åº¦é«˜ï¼‰ï¼›
  - æœ‰ **4 åˆ—** æ˜¯ `int64` ç±»å‹ï¼ˆæ•´æ•°ï¼‰ã€‚

------

### âœ… å†…å­˜ä½¿ç”¨æƒ…å†µï¼š

```
wasm


å¤åˆ¶ç¼–è¾‘
memory usage: 1.3 GB
```

- æ•´ä¸ª DataFrame å ç”¨äº†çº¦ **1.3GB å†…å­˜**ã€‚
- æ•°æ®é‡éå¸¸å¤§ï¼Œå»ºè®®åœ¨è®­ç»ƒå‰åšæ•°æ®ç­›é€‰æˆ–é™ç»´ï¼Œå¦åˆ™å®¹æ˜“å ç”¨å¤ªå¤šå†…å­˜ã€‚

------

### âœ… `None` æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™æ˜¯ `print(data.info())` çš„è¿”å›å€¼ï¼š

- `data.info()` æœ¬èº«æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼ˆè¿”å›çš„æ˜¯ `None`ï¼‰ï¼Œåªæ˜¯åœ¨è°ƒç”¨æ—¶è‡ªåŠ¨æ‰“å°ä¿¡æ¯ã€‚
- å¦‚æœä½ å†™ `print(data.info())`ï¼Œæœ€åå°±ä¼šæ˜¾ç¤º `None`ã€‚

------

### ğŸ“Œ æ€»ç»“ï¼š

è¿™æ®µè¾“å‡ºå‘Šè¯‰æˆ‘ä»¬ï¼š

| é¡¹ç›®                      | å†…å®¹è¯´æ˜                         |
| ------------------------- | -------------------------------- |
| æ•°æ®æ€»é‡                  | 29118021 è¡Œï¼Œ6 åˆ—                |
| åˆ—åä¸ç±»å‹                | åŒ…å«åæ ‡ã€æ—¶é—´ã€ç²¾åº¦ã€ä½ç½® ID ç­‰ |
| å†…å­˜å ç”¨                  | çº¦ 1.3GB                         |
| ç›®æ ‡å˜é‡                  | `place_id`ï¼Œè¡¨ç¤ºç”¨æˆ·ç­¾åˆ°çš„ä½ç½®   |
| `print(data.info())` è¿”å› | `None`ï¼Œä»…è´Ÿè´£æ‰“å°ç»“æ„ä¿¡æ¯       |



------

å¦‚ä½ ç»§ç»­åç»­åˆ†æï¼ˆå¦‚ç”¨ KNN åˆ†ç±» `place_id`ï¼‰ï¼Œå»ºè®®å¯¹ `x` å’Œ `y` åšåŒºåŸŸç­›é€‰ï¼Œæˆ–å¯¹ç‰¹å¾è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œä»¥å‡å°‘è®¡ç®—å‹åŠ›ã€‚éœ€è¦æˆ‘å¸®ä½ å†™åç»­æ¨¡å‹æ­¥éª¤ä¹Ÿå¯ä»¥å‘Šè¯‰æˆ‘ã€‚



##### æ‚¨è¯´ï¼š

data.shape data.describe()ä»£ç ä½œç”¨



###### ChatGPT è¯´ï¼š

ä½ è¿™ä¸¤è¡Œä»£ç ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘data.shape
data.describe()
```

æ˜¯ç”¨äº **äº†è§£æ•°æ®è§„æ¨¡å’Œç»Ÿè®¡ç‰¹å¾** çš„ï¼Œä¸‹é¢é€ä¸€è§£é‡Šï¼š

------

### âœ… `data.shape`

ä½œç”¨ï¼šæŸ¥çœ‹ **æ•°æ®çš„è¡Œæ•°å’Œåˆ—æ•°ï¼ˆç»´åº¦ï¼‰**

ğŸ“Œ ç¤ºä¾‹è¾“å‡ºï¼š

```
python


å¤åˆ¶ç¼–è¾‘
(29118021, 6)
```

è¡¨ç¤ºï¼š

- æ•°æ®æœ‰ **29,118,021 è¡Œ**ï¼ˆå³ 2910 ä¸‡æ¡æ ·æœ¬ï¼‰
- æœ‰ **6 åˆ—**ï¼ˆç‰¹å¾å­—æ®µï¼‰

ğŸ’¡ ç­‰ä»·äºï¼š

```
python


å¤åˆ¶ç¼–è¾‘
print("æ•°æ®ç»´åº¦ï¼š", data.shape)
```

------

### âœ… `data.describe()`

ä½œç”¨ï¼šæŸ¥çœ‹æ•°å€¼åˆ—çš„ **æè¿°æ€§ç»Ÿè®¡ä¿¡æ¯**ï¼Œå¸®åŠ©ä½ å¿«é€Ÿäº†è§£æ¯ä¸ªå­—æ®µçš„å–å€¼åˆ†å¸ƒã€‚

ğŸ“Œ ç¤ºä¾‹è¾“å‡ºï¼ˆç®€ç•¥ï¼‰ï¼š

|       | row_id   | x        | y        | accuracy | time     | place_id |
| ----- | -------- | -------- | -------- | -------- | -------- | -------- |
| count | 2.91e+07 | 2.91e+07 | 2.91e+07 | 2.91e+07 | 2.91e+07 | 2.91e+07 |
| mean  | 1.46e+07 | 5.99     | 5.99     | 65.6     | 4.01e+06 | 8.77e+09 |
| std   | ...      | ...      | ...      | ...      | ...      | ...      |
| min   | 0        | 0.0      | 0.0      | 1        | 0        | 1        |
| 25%   | ...      | ...      | ...      | ...      | ...      | ...      |
| 50%   | ...      | ...      | ...      | ...      | ...      | ...      |
| 75%   | ...      | ...      | ...      | ...      | ...      | ...      |
| max   | 2.91e+07 | 10.0     | 10.0     | 1000+    | 7.86e+06 | 9.84e+09 |



è¿™äº›ç»Ÿè®¡é‡åˆ†åˆ«è¡¨ç¤ºï¼š

| æŒ‡æ ‡        | å«ä¹‰                           |
| ----------- | ------------------------------ |
| count       | éç©ºå€¼æ•°é‡ï¼ˆè¡Œæ•°ï¼‰             |
| mean        | å¹³å‡å€¼                         |
| std         | æ ‡å‡†å·®ï¼ˆè¡¡é‡æ³¢åŠ¨èŒƒå›´ï¼‰         |
| min/max     | æœ€å°å€¼ / æœ€å¤§å€¼                |
| 25%/50%/75% | åˆ†ä½æ•°ï¼ˆä¸­ä½æ•°ã€ä¸Šä¸‹å››åˆ†ä½ç‚¹ï¼‰ |



------

### âœ… æ€»ç»“å¯¹æ¯”ï¼š

| ä»£ç               | ä½œç”¨                         |
| ----------------- | ---------------------------- |
| `data.shape`      | æŸ¥çœ‹æ•°æ®çš„è¡Œæ•°å’Œåˆ—æ•°ï¼ˆç»´åº¦ï¼‰ |
| `data.describe()` | å¿«é€ŸæŸ¥çœ‹æ¯åˆ—æ•°å€¼çš„ç»Ÿè®¡åˆ†å¸ƒ   |



è¿™äº›æ˜¯æ•°æ®åˆ†æå’Œå»ºæ¨¡å‰çš„å¸¸è§„â€œæ•°æ®æ¢ç´¢â€æ­¥éª¤ï¼Œç”¨äºï¼š

- æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¼‚å¸¸å€¼æˆ–æç«¯å€¼
- äº†è§£æ•°æ®å¤§è‡´åˆ†å¸ƒ
- ä¸ºæ¸…æ´—ã€å½’ä¸€åŒ–ç­‰é¢„å¤„ç†åšå¥½å‡†å¤‡

å¦‚æœä½ éœ€è¦æˆ‘å¸®ä½ åŸºäºè¿™äº›ä¿¡æ¯è¿›ä¸€æ­¥å»ºæ¨¡æˆ–å¯è§†åŒ–åˆ†æï¼Œä¹Ÿå¯ä»¥ç»§ç»­å‘Šè¯‰æˆ‘ã€‚



##### æ‚¨è¯´ï¼š

ä»£ç ä½œç”¨# å¤„ç†æ—¶é—´çš„æ•°æ® time_value = pd.to_datetime(data['time'], unit='s') print(time_value.head(10))  #æœ€å¤§æ—¶é—´æ˜¯1æœˆ10å·



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š

------

### åŠŸèƒ½è¯´æ˜ï¼š

**å°†æ•°æ®ä¸­çš„æ—¶é—´æˆ³ï¼ˆæ•´æ•°ï¼‰è½¬æ¢ä¸ºæ›´æ˜“è¯»çš„æ—¥æœŸæ—¶é—´æ ¼å¼ï¼Œæ–¹ä¾¿åç»­åˆ†æå’Œå¤„ç†ã€‚**

------

### é€è¡Œè§£é‡Šï¼š

```
python


å¤åˆ¶ç¼–è¾‘
time_value = pd.to_datetime(data['time'], unit='s')
```

- `data['time']` æ˜¯åŸå§‹æ•°æ®ä¸­è¡¨ç¤ºæ—¶é—´çš„åˆ—ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæ•´æ•°æ—¶é—´æˆ³ï¼Œå•ä½æ˜¯**ç§’**ï¼ˆä»æŸä¸ªèµ·å§‹æ—¶é—´ç®—èµ·ï¼‰ã€‚
- `pd.to_datetime(..., unit='s')`ï¼š
  - Pandas å‡½æ•°ï¼Œå°†æ•´æ•°æ—¶é—´æˆ³è½¬æ¢æˆ **æ—¶é—´æ—¥æœŸæ ¼å¼ï¼ˆdatetimeï¼‰**ã€‚
  - `unit='s'` è¡¨ç¤ºæ—¶é—´æˆ³å•ä½æ˜¯ç§’ï¼ˆä¹Ÿå¯ä»¥æ˜¯æ¯«ç§’`'ms'`ç­‰ï¼‰ã€‚
- ç»“æœ `time_value` æ˜¯ä¸€ä¸ª `DatetimeIndex` æˆ– `Series`ï¼Œæ¯æ¡è®°å½•å¯¹åº”ä¸€ä¸ªå…·ä½“çš„æ—¥æœŸå’Œæ—¶é—´ã€‚

------

```
python


å¤åˆ¶ç¼–è¾‘
print(time_value.head(10))  # æœ€å¤§æ—¶é—´æ˜¯1æœˆ10å·
```

- æ‰“å°å‰ 10 æ¡è½¬æ¢åçš„æ—¥æœŸæ—¶é—´ï¼Œæ–¹ä¾¿è§‚å¯Ÿæ—¶é—´ä¿¡æ¯ã€‚
- æ³¨é‡Šä¸­æåˆ°â€œæœ€å¤§æ—¶é—´æ˜¯1æœˆ10å·â€ï¼Œæ„å‘³ç€æ•°æ®æ—¶é—´èŒƒå›´çº¦åœ¨ 1 æœˆ 1 æ—¥åˆ° 1 æœˆ 10 æ—¥ä¹‹é—´ã€‚

------

### ä¸¾ä¾‹ï¼š

å‡è®¾ `data['time']` æ˜¯ç±»ä¼¼ `3600`ã€`7200` è¿™æ ·çš„æ•´æ•°ï¼ˆç§’æ•°ï¼‰ï¼Œè½¬æ¢åå°±æ˜¯ï¼š

```
python-replå¤åˆ¶ç¼–è¾‘2025-01-01 01:00:00
2025-01-01 02:00:00
...
```

------

### æ€»ç»“ï¼š

è¿™æ®µä»£ç æŠŠ**åŸå§‹çš„ç§’çº§æ—¶é—´æˆ³**è½¬æˆäº†**äººç±»å¯è¯»çš„æ—¥æœŸæ—¶é—´æ ¼å¼**ï¼Œæ–¹ä¾¿åšæ—¶é—´åºåˆ—åˆ†æã€æ—¶é—´ç‰¹å¾æå–ï¼ˆå¦‚æå–å°æ—¶ã€æ˜ŸæœŸå‡ ç­‰ï¼‰ã€‚



3/3





##### æ‚¨è¯´ï¼š

\# æŠŠæ—¥æœŸæ ¼å¼è½¬æ¢æˆ å­—å…¸æ ¼å¼ï¼ŒæŠŠå¹´ï¼Œæœˆï¼Œæ—¥ï¼Œæ—¶ï¼Œåˆ†ï¼Œç§’è½¬æ¢ä¸ºå­—å…¸æ ¼å¼ï¼Œ time_value = pd.DatetimeIndex(time_value) # print('-' * 50) print(time_value[0:10])ä»£ç ä½œç”¨



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š

> **å°†æ—¶é—´åˆ—ï¼ˆæ—¶é—´æˆ³è½¬ä¸ºçš„ datetime æ ¼å¼ï¼‰è½¬æ¢ä¸ºä¸€ä¸ªç»“æ„åŒ–çš„ `DatetimeIndex` å¯¹è±¡ï¼Œä»¥ä¾¿ä»ä¸­æå–å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ç­‰å­—æ®µç”¨äºç‰¹å¾å·¥ç¨‹ã€‚**

------

### é€è¡Œè§£é‡Šå¦‚ä¸‹ï¼š

------

```
python


å¤åˆ¶ç¼–è¾‘
time_value = pd.DatetimeIndex(time_value)
```

- `pd.DatetimeIndex(...)` æ˜¯ Pandas ä¸­ç”¨äºå°†ä¸€ç»„ datetime æ•°æ®å°è£…ä¸ºä¸€ä¸ª **ç´¢å¼•å¯¹è±¡**ï¼Œå®ƒå…·å¤‡å¾ˆå¤šç»“æ„åŒ–çš„æ—¶é—´å±æ€§ã€‚
- åŸå§‹ `time_value` æ˜¯ä¸€ä¸ª `Series`ï¼ˆä¸€åˆ— datetime æ ¼å¼çš„æ—¶é—´ï¼‰ï¼›
- è½¬æ¢æˆ `DatetimeIndex` åï¼Œå¯ä»¥ç›´æ¥è®¿é—®å¦‚ä¸‹å­—æ®µï¼š
  - `time_value.year` å¹´
  - `time_value.month` æœˆ
  - `time_value.day` æ—¥
  - `time_value.hour` å°æ—¶
  - `time_value.minute` åˆ†é’Ÿ
  - `time_value.second` ç§’
  - `time_value.weekday` æ˜ŸæœŸå‡ ï¼ˆ0=å‘¨ä¸€ï¼Œ6=å‘¨æ—¥ï¼‰
  - `time_value.dayofyear` ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©

ğŸ“Œ âœ… è¿™ä¸ªè½¬æ¢çš„ä¸»è¦ç›®çš„ï¼š**ä¾¿äºæå–æ—¶é—´ç›¸å…³ç‰¹å¾**ï¼Œä¸ºæœºå™¨å­¦ä¹ æ¨¡å‹æä¾›æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚

------

```
pythonå¤åˆ¶ç¼–è¾‘print('-' * 50)
print(time_value[0:10])
```

- æ‰“å° 50 ä¸ª `-` ä½œä¸ºåˆ†éš”çº¿ï¼Œç¾åŒ–è¾“å‡ºï¼›
- æ‰“å°è½¬æ¢åçš„å‰ 10 ä¸ª `DatetimeIndex` æ—¶é—´å€¼ï¼Œç¤ºä¾‹è¾“å‡ºå¦‚ä¸‹ï¼š

```
python-replå¤åˆ¶ç¼–è¾‘2025-01-01 00:00:00
2025-01-01 00:01:00
...
```

------

### ğŸ” ç¤ºä¾‹ï¼šä» `DatetimeIndex` ä¸­æå–å­—æ®µ

ä½ æ¥ä¸‹æ¥å¯ä»¥å†™ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘data['day'] = time_value.day
data['hour'] = time_value.hour
data['weekday'] = time_value.weekday
```

ç”¨äºæ„é€ æ–°ç‰¹å¾ï¼Œæ¯”å¦‚ï¼š

- ç”¨æˆ·ç­¾åˆ°çš„æ—¶é—´æ˜¯ç™½å¤©è¿˜æ˜¯å¤œæ™šï¼Ÿ
- æ˜¯å·¥ä½œæ—¥è¿˜æ˜¯å‘¨æœ«ï¼Ÿ
- æ˜¯å“ªä¸ªå°æ—¶ç”¨æˆ·æœ€æ´»è·ƒï¼Ÿ

------

### âœ… æ€»ç»“ä¸€å¥è¯ï¼š

> è¿™æ®µä»£ç æŠŠæ—¶é—´åˆ—å˜æˆç»“æ„åŒ–æ—¶é—´ç´¢å¼•ï¼ˆ`DatetimeIndex`ï¼‰ï¼Œä¸ºåç»­**æå–å¹´/æœˆ/æ—¥/å°æ—¶ç­‰æ—¶é—´ç‰¹å¾**åšå¥½å‡†å¤‡ï¼Œæ˜¯å…¸å‹çš„æ—¶é—´ç‰¹å¾å·¥ç¨‹æ­¥éª¤ä¹‹ä¸€ã€‚



##### æ‚¨è¯´ï¼š

ä»£ç ä½œç”¨ï¼šprint('-' * 50) # æ„é€ ä¸€äº›ç‰¹å¾ï¼Œæ‰§è¡Œçš„è­¦å‘Šæ˜¯å› ä¸ºæˆ‘ä»¬çš„æ“ä½œæ˜¯å¤åˆ¶ï¼Œlocæ˜¯ç›´æ¥æ”¾å…¥ print(type(data)) # data['day'] = time_value.day # data['hour'] = time_value.hour # data['weekday'] = time_value.weekday #æ—¥æœŸï¼Œæ˜¯å¦æ˜¯å‘¨æœ«ï¼Œå°æ—¶å¯¹äºä¸ªäººè¡Œä¸ºçš„å½±å“æ˜¯è¾ƒå¤§çš„(ä¾‹å¦‚åƒé¥­æ—¶é—´å»é¥­åº—ï¼Œçœ‹ç”µå½±æ—¶é—´å»ç”µå½±é™¢ç­‰),æ‰€ä»¥æ‰åšä¸‹é¢çš„å¤„ç† data.insert(data.shape[1], 'day', time_value.day) #data.shape[1]æ˜¯ä»£è¡¨æ’å…¥åˆ°æœ€åçš„æ„æ€,ä¸€ä¸ªæœˆçš„å“ªä¸€å¤© data.insert(data.shape[1], 'hour', time_value.hour)#æ˜¯å¦å»ä¸€ä¸ªåœ°æ–¹æ‰“å¡ï¼Œæ—©ä¸Šï¼Œä¸­åˆï¼Œæ™šä¸Šæ˜¯æœ‰å½±å“çš„ data.insert(data.shape[1], 'weekday', time_value.weekday) #0ä»£è¡¨å‘¨ä¸€ï¼Œ6ä»£è¡¨å‘¨æ—¥ï¼Œæ˜ŸæœŸå‡  # # æŠŠæ—¶é—´æˆ³ç‰¹å¾åˆ é™¤ data = data.drop(['time'], axis=1) print('-' * 50) data.head()



###### ChatGPT è¯´ï¼š

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯å¯¹åŸå§‹ç­¾åˆ°æ•°æ®è¿›è¡Œ**æ—¶é—´ç‰¹å¾å·¥ç¨‹å¤„ç†**ï¼Œæå–å¯¹ç”¨æˆ·ç­¾åˆ°è¡Œä¸ºæœ‰æ˜¾è‘—å½±å“çš„æ—¶é—´ç»´åº¦ï¼ˆå¦‚ï¼š**æ—¥ã€å°æ—¶ã€æ˜ŸæœŸå‡ **ï¼‰ï¼Œå¹¶åˆ é™¤åŸå§‹çš„æ—¶é—´æˆ³å­—æ®µï¼Œæ•´ç†ä¸ºé€‚åˆç”¨äºå»ºæ¨¡çš„æ•°æ®æ ¼å¼ã€‚

ä¸‹é¢æ˜¯é€è¡Œè§£é‡Šï¼š

------

### ğŸ”¹ æ‰“å°åˆ†éš”çº¿

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

- ç”¨äºç¾åŒ–è¾“å‡ºï¼Œåˆ†éš”å†…å®¹ã€‚

------

### ğŸ” æ‰“å° DataFrame ç±»å‹

```
python


å¤åˆ¶ç¼–è¾‘
print(type(data))
```

- è¾“å‡º `data` çš„æ•°æ®ç±»å‹ï¼Œåº”è¯¥æ˜¯ï¼š

  ```
  python
  
  
  å¤åˆ¶ç¼–è¾‘
  <class 'pandas.core.frame.DataFrame'>
  ```

- è¡¨æ˜è¿™æ˜¯ä¸€ä¸ª Pandas è¡¨æ ¼ç»“æ„å¯¹è±¡ã€‚

------

### ğŸ”§ æ’å…¥æ–°ç‰¹å¾åˆ—ï¼ˆä»æ—¶é—´ä¸­æå–ï¼‰

```
python


å¤åˆ¶ç¼–è¾‘
data.insert(data.shape[1], 'day', time_value.day)
```

- `data.shape[1]` è¡¨ç¤ºå½“å‰åˆ—çš„æ€»æ•°ï¼ˆåœ¨æœ€åä¸€åˆ—åæ’å…¥ï¼‰ï¼›
- `'day'` è¡¨ç¤ºç­¾åˆ°çš„â€œå‡ å·â€ï¼ˆ1å·ã€2å·â€¦â€¦ï¼‰ï¼›
- `time_value.day` æ˜¯ä» `DatetimeIndex` ä¸­æå–çš„â€œå¤©â€å­—æ®µã€‚

ğŸ“Œ æ’å…¥ä½ç½®å¯ä»¥æ˜¯ä»»æ„åˆ—ç´¢å¼•ï¼Œè¿™é‡Œç”¨ `data.shape[1]` ä»£è¡¨ **æ’å…¥åˆ°æœ€åä¸€åˆ—**ã€‚

------

```
python


å¤åˆ¶ç¼–è¾‘
data.insert(data.shape[1], 'hour', time_value.hour)
```

- æ’å…¥ç­¾åˆ°çš„â€œå°æ—¶â€å­—æ®µï¼ˆ0~23ï¼‰ï¼Œè¡¨ç¤ºç”¨æˆ·åœ¨å“ªä¸ªæ—¶æ®µç­¾åˆ°ã€‚
- è¿™ä¸ªå¯¹ç”¨æˆ·è¡Œä¸ºéå¸¸å…³é”®ï¼š
  - æ¯”å¦‚æ—©ä¸Šå¸¸ç­¾åˆ°åœ°é“ç«™ã€ä¸­åˆç­¾åˆ°é¤å…ã€æ™šä¸Šç­¾åˆ°å½±é™¢ç­‰ã€‚

------

```
python


å¤åˆ¶ç¼–è¾‘
data.insert(data.shape[1], 'weekday', time_value.weekday)
```

- æ’å…¥ç­¾åˆ°çš„â€œæ˜ŸæœŸå‡ â€å­—æ®µï¼ˆ0=å‘¨ä¸€ï¼Œ6=å‘¨æ—¥ï¼‰ã€‚
- è¿™ç”¨äºåŒºåˆ†å·¥ä½œæ—¥å’Œå‘¨æœ«ç”¨æˆ·çš„è¡Œä¸ºå·®å¼‚ã€‚
  - ä¾‹å¦‚å·¥ä½œæ—¥é€šå‹¤ç­¾åˆ° vs å‘¨æœ«å¨±ä¹åœºæ‰€ç­¾åˆ°ã€‚

------

### ğŸ—‘ï¸ åˆ é™¤åŸå§‹æ—¶é—´æˆ³å­—æ®µ

```
python


å¤åˆ¶ç¼–è¾‘
data = data.drop(['time'], axis=1)
```

- åˆ é™¤åŸå§‹ `time` åˆ—ï¼ŒåŸå› æ˜¯ï¼š
  - å®ƒæ˜¯åŸå§‹çš„â€œç§’â€çº§æ•´æ•°ï¼Œä¸å¯è¯»ï¼›
  - æˆ‘ä»¬å·²ç»ä»å®ƒä¸­æå–å‡º `day`, `hour`, `weekday` è¿™äº›æ›´æœ‰ç”¨çš„ç‰¹å¾ï¼›
- `axis=1` è¡¨ç¤ºæŒ‰åˆ—åˆ é™¤ã€‚

------

### ğŸ”š æ‰“å°åˆ†éš”çº¿

```
python


å¤åˆ¶ç¼–è¾‘
print('-' * 50)
```

------

### ğŸ‘€ æŸ¥çœ‹æ•°æ®å‰å‡ è¡Œ

```
python


å¤åˆ¶ç¼–è¾‘
data.head()
```

- æŸ¥çœ‹æ›´æ–°åçš„ DataFrame å‰ 5 è¡Œï¼Œç”¨äºç¡®è®¤ï¼š
  - æ–°å¢çš„æ—¶é—´ç‰¹å¾æ˜¯å¦æ’å…¥æˆåŠŸï¼›
  - åŸæ¥çš„ `time` å­—æ®µæ˜¯å¦åˆ é™¤ã€‚

------

### âœ… æ€»ç»“æ•´æ®µä»£ç ä½œç”¨ï¼š

| æ­¥éª¤         | è¯´æ˜                                        |
| ------------ | ------------------------------------------- |
| æå–æ—¶é—´å­—æ®µ | ä»åŸå§‹æ—¶é—´æˆ³ä¸­æå– `day`, `hour`, `weekday` |
| æ’å…¥æ–°åˆ—     | æŠŠè¿™äº›æ–°æ—¶é—´ç‰¹å¾æ·»åŠ åˆ°æ•°æ®çš„æœ«å°¾            |
| åˆ é™¤åŸæ—¶é—´æˆ³ | ç§»é™¤ä¸å†éœ€è¦çš„ `time` å­—æ®µ                  |
| å‡†å¤‡å»ºæ¨¡     | å¾—åˆ°æ›´æœ‰è§£é‡ŠåŠ›çš„æ—¶é—´ç‰¹å¾ï¼Œå¢å¼ºæ¨¡å‹æ€§èƒ½      |



------

è¿™äº›æ—¶é—´ç‰¹å¾åœ¨**ç”¨æˆ·è¡Œä¸ºé¢„æµ‹ã€ä½ç½®æ‰“å¡å»ºæ¨¡ã€KNNåˆ†ç±»ç­‰ä»»åŠ¡ä¸­éå¸¸å…³é”®**ï¼Œå› ä¸ºæ—¶é—´ä¸äººçš„æ´»åŠ¨é«˜åº¦ç›¸å…³ã€‚ä½ ç°åœ¨çš„åšæ³•æ˜¯æ ‡å‡†ã€åˆç†çš„â€œç‰¹å¾å·¥ç¨‹â€æ­¥éª¤ã€‚éœ€è¦çš„è¯ï¼Œæˆ‘è¿˜å¯ä»¥å¸®ä½ ç»§ç»­åšæ•°æ®æ ‡å‡†åŒ–ã€è®­ç»ƒæµ‹è¯•é›†åˆ’åˆ†å’Œ KNN å»ºæ¨¡ã€‚



##### æ‚¨è¯´ï¼š

print('-' * 50) # æ„é€ ä¸€äº›ç‰¹å¾ï¼Œæ‰§è¡Œçš„è­¦å‘Šæ˜¯å› ä¸ºæˆ‘ä»¬çš„æ“ä½œæ˜¯å¤åˆ¶ï¼Œlocæ˜¯ç›´æ¥æ”¾å…¥ print(type(data)) data['day'] = time_value.day data['hour'] = time_value.hour data['weekday'] = time_value.weekday #æ—¥æœŸï¼Œæ˜¯å¦æ˜¯å‘¨æœ«ï¼Œå°æ—¶å¯¹äºä¸ªäººè¡Œä¸ºçš„å½±å“æ˜¯è¾ƒå¤§çš„(ä¾‹å¦‚åƒé¥­æ—¶é—´å»é¥­åº—ï¼Œçœ‹ç”µå½±æ—¶é—´å»ç”µå½±é™¢ç­‰),æ‰€ä»¥æ‰åšä¸‹é¢çš„å¤„ç† data.insert(data.shape[1], 'day', time_value.day) #data.shape[1]æ˜¯ä»£è¡¨æ’å…¥åˆ°æœ€åçš„æ„æ€,ä¸€ä¸ªæœˆçš„å“ªä¸€å¤© data.insert(data.shape[1], 'hour', time_value.hour)#æ˜¯å¦å»ä¸€ä¸ªåœ°æ–¹æ‰“å¡ï¼Œæ—©ä¸Šï¼Œä¸­åˆï¼Œæ™šä¸Šæ˜¯æœ‰å½±å“çš„ data.insert(data.shape[1], 'weekday', time_value.weekday) #0ä»£è¡¨å‘¨ä¸€ï¼Œ6ä»£è¡¨å‘¨æ—¥ï¼Œæ˜ŸæœŸå‡  # # æŠŠæ—¶é—´æˆ³ç‰¹å¾åˆ é™¤ data = data.drop(['time'], axis=1) print('-' * 50) data.head()æœ‰å¦‚ä¸‹é—®é¢˜ï¼šValueError                                Traceback (most recent call last) Cell In[23], line 8      6 data['weekday'] = time_value.weekday      7 #æ—¥æœŸï¼Œæ˜¯å¦æ˜¯å‘¨æœ«ï¼Œå°æ—¶å¯¹äºä¸ªäººè¡Œä¸ºçš„å½±å“æ˜¯è¾ƒå¤§çš„(ä¾‹å¦‚åƒé¥­æ—¶é—´å»é¥­åº—ï¼Œçœ‹ç”µå½±æ—¶é—´å»ç”µå½±é™¢ç­‰),æ‰€ä»¥æ‰åšä¸‹é¢çš„å¤„ç† ----> 8 data.insert(data.shape[1], 'day', time_value.day) #data.shape[1]æ˜¯ä»£è¡¨æ’å…¥åˆ°æœ€åçš„æ„æ€,ä¸€ä¸ªæœˆçš„å“ªä¸€å¤©      9 data.insert(data.shape[1], 'hour', time_value.hour)#æ˜¯å¦å»ä¸€ä¸ªåœ°æ–¹æ‰“å¡ï¼Œæ—©ä¸Šï¼Œä¸­åˆï¼Œæ™šä¸Šæ˜¯æœ‰å½±å“çš„     10 data.insert(data.shape[1], 'weekday', time_value.weekday) #0ä»£è¡¨å‘¨ä¸€ï¼Œ6ä»£è¡¨å‘¨æ—¥ï¼Œæ˜ŸæœŸå‡  File ~\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\frame.py:5165, in DataFrame.insert(self, loc, column, value, allow_duplicates)   5159     raise ValueError(   5160         "Cannot specify 'allow_duplicates=True' when "   5161         "'self.flags.allows_duplicate_labels' is False."   5162     )   5163 if not allow_duplicates and column in self.columns:   5164     # Should this be a different kind of error?? -> 5165     raise ValueError(f"cannot insert {column}, already exists")   5166 if not is_integer(loc):   5167     raise TypeError("loc must be int") ValueError: cannot insert day, already exists



###### ChatGPT è¯´ï¼š

ä½ é‡åˆ°çš„æŠ¥é”™æ˜¯ï¼š

```
sql


å¤åˆ¶ç¼–è¾‘
ValueError: cannot insert day, already exists
```

### ğŸ§¨ æŠ¥é”™åŸå› ï¼š

ä½ å·²ç»åœ¨å‰é¢ç”¨ä»¥ä¸‹ä»£ç ç»™ `data` æ·»åŠ äº† `'day'`ã€`'hour'` å’Œ `'weekday'` ä¸‰åˆ—ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘data['day'] = time_value.day
data['hour'] = time_value.hour
data['weekday'] = time_value.weekday
```

ç„¶åä½ åˆé‡å¤ç”¨ `data.insert(...)` æƒ³å†æ’å…¥ä¸€éè¿™ä¸‰åˆ—ï¼Œä½†è¿™æ—¶å®ƒä»¬ **å·²ç»å­˜åœ¨äº†**ï¼Œæ‰€ä»¥ Pandas æŠ¥é”™è¯´ï¼š

> ä¸èƒ½æ’å…¥åˆ— `'day'`ï¼Œå› ä¸ºå®ƒå·²ç»å­˜åœ¨äº DataFrame ä¸­ã€‚

------

### âœ… æ­£ç¡®åšæ³•ï¼š**åªé€‰æ‹©ä¸€ç§æ–¹å¼æ·»åŠ åˆ—ï¼Œä¸è¦é‡å¤æ·»åŠ ï¼**

#### âœ… âœ… æ¨èæ–¹å¼ï¼ˆç®€å•ç›´è§‚ï¼‰â€”â€”ç›´æ¥èµ‹å€¼æ³•ï¼ˆä¸å†ç”¨ `insert()`ï¼‰ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘print('-' * 50)
print(type(data))

# ç›´æ¥é€šè¿‡èµ‹å€¼æ·»åŠ æ–°åˆ—ï¼ˆæ¨èï¼‰
data['day'] = time_value.day
data['hour'] = time_value.hour
data['weekday'] = time_value.weekday

# åˆ é™¤åŸå§‹çš„æ—¶é—´æˆ³åˆ—
data = data.drop(['time'], axis=1)

print('-' * 50)
data.head()
```

------

### ğŸ“ å¯¹æ¯”ä¸¤ç§æ–¹å¼ï¼š

| æ–¹æ³•         | å†™æ³•                           | æ˜¯å¦å…è®¸è¦†ç›–åŒååˆ—       |
| ------------ | ------------------------------ | ------------------------ |
| âœ… ç›´æ¥èµ‹å€¼æ³• | `data['day'] = ...`            | å…è®¸ï¼Œæ¨èä½¿ç”¨           |
| âŒ `insert()` | `data.insert(..., 'day', ...)` | ä¸å…è®¸ï¼Œè‹¥åˆ—å·²å­˜åœ¨ä¼šæŠ¥é”™ |



------

### ğŸ› ï¸ å¦‚æœä½ åšæŒä½¿ç”¨ `insert()`ï¼Œå¯ä»¥å…ˆåˆ¤æ–­åˆ—æ˜¯å¦å­˜åœ¨ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘if 'day' not in data.columns:
    data.insert(data.shape[1], 'day', time_value.day)
```

ä½†åœ¨å®é™…å·¥ä½œä¸­ï¼Œ**æ¨èç”¨ç®€å•èµ‹å€¼æ³•**ï¼Œæ›´çµæ´»æ›´å®‰å…¨ã€‚

------

### âœ… æ€»ç»“ï¼š

ä½ æŠ¥é”™çš„åŸå› æ˜¯é‡å¤æ’å…¥å·²å­˜åœ¨çš„åˆ—ï¼ˆ`'day'`ã€`'hour'`ã€`'weekday'`ï¼‰ã€‚
 è¯·åˆ æ‰ `insert(...)` çš„éƒ¨åˆ†ï¼Œä¿ç•™å‰é¢çš„èµ‹å€¼è¯­å¥å³å¯ï¼Œç¨‹åºå°±ä¸ä¼šæŠ¥é”™äº† âœ…ã€‚éœ€è¦æˆ‘å¸®ä½ æ•´ç†æˆå®Œæ•´æ— è¯¯çš„ä»£ç ä¹Ÿå¯ä»¥å‘Šè¯‰æˆ‘ã€‚



##### æ‚¨è¯´ï¼š

KeyError                                  Traceback (most recent call last) Cell In[24], line 14      6 data['weekday'] = time_value.weekday      7 #æ—¥æœŸï¼Œæ˜¯å¦æ˜¯å‘¨æœ«ï¼Œå°æ—¶å¯¹äºä¸ªäººè¡Œä¸ºçš„å½±å“æ˜¯è¾ƒå¤§çš„(ä¾‹å¦‚åƒé¥­æ—¶é—´å»é¥­åº—ï¼Œçœ‹ç”µå½±æ—¶é—´å»ç”µå½±é™¢ç­‰),æ‰€ä»¥æ‰åšä¸‹é¢çš„å¤„ç†      8 # data.insert(data.shape[1], 'day', time_value.day) #data.shape[1]æ˜¯ä»£è¡¨æ’å…¥åˆ°æœ€åçš„æ„æ€,ä¸€ä¸ªæœˆçš„å“ªä¸€å¤©      9 # data.insert(data.shape[1], 'hour', time_value.hour)#æ˜¯å¦å»ä¸€ä¸ªåœ°æ–¹æ‰“å¡ï¼Œæ—©ä¸Šï¼Œä¸­åˆï¼Œæ™šä¸Šæ˜¯æœ‰å½±å“çš„   (...)     12 #     13 # æŠŠæ—¶é—´æˆ³ç‰¹å¾åˆ é™¤ ---> 14 data = data.drop(['time'], axis=1)     15 print('-' * 50)     16 data.head() File ~\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\frame.py:5588, in DataFrame.drop(self, labels, axis, index, columns, level, inplace, errors)   5440 def drop(   5441     self,   5442     labels: IndexLabel | None = None,   (...)   5449     errors: IgnoreRaise = "raise",   5450 ) -> DataFrame | None:   5451     """   5452     Drop specified labels from rows or columns.   5453    (...)   5586             weight  1.0     0.8   5587     """ -> 5588     return super().drop(   5589         labels=labels,   5590         axis=axis,   5591         index=index,   5592         columns=columns,   5593         level=level,   5594         inplace=inplace,   5595         errors=errors,   5596     ) File ~\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\generic.py:4807, in NDFrame.drop(self, labels, axis, index, columns, level, inplace, errors)   4805 for axis, labels in axes.items():   4806     if labels is not None: -> 4807         obj = obj._drop_axis(labels, axis, level=level, errors=errors)   4809 if inplace:   4810     self._update_inplace(obj) File ~\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\generic.py:4849, in NDFrame._drop_axis(self, labels, axis, level, errors, only_slice)   4847         new_axis = axis.drop(labels, level=level, errors=errors)   4848     else: -> 4849         new_axis = axis.drop(labels, errors=errors)   4850     indexer = axis.get_indexer(new_axis)   4852 # Case for non-unique axis   4853 else: File ~\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\i



###### ChatGPT è¯´ï¼š

ä½ ç°åœ¨é‡åˆ°çš„é”™è¯¯æ˜¯ï¼š

```
vbnet


å¤åˆ¶ç¼–è¾‘
KeyError: "['time'] not found in axis"
```

------

### â— é”™è¯¯åŸå› ï¼š

ä½ å†™äº†è¿™è¡Œä»£ç ï¼š

```
python


å¤åˆ¶ç¼–è¾‘
data = data.drop(['time'], axis=1)
```

æ„æ€æ˜¯ä»åˆ—ä¸­åˆ é™¤ `'time'` å­—æ®µã€‚

ä½†æŠ¥é”™è¯´æ˜ï¼š

> `DataFrame` ä¸­ **å·²ç»æ²¡æœ‰åä¸º `'time'` çš„åˆ—äº†**ï¼Œæ‰€ä»¥ Pandas æŠ¥é”™è¯´æ‰¾ä¸åˆ°è¯¥åˆ—ã€‚

------

### âœ… è§£å†³æ–¹æ³•ï¼š

åœ¨è°ƒç”¨ `.drop()` åˆ é™¤åˆ—ä¹‹å‰ï¼Œ**å…ˆç¡®è®¤è¿™ä¸ªåˆ—æ˜¯å¦å­˜åœ¨**ï¼Œæœ‰ä¸¤ç§å¸¸ç”¨æ–¹å¼ï¼š

------

#### âœ… æ–¹æ³• 1ï¼šä½¿ç”¨ `errors='ignore'`ï¼Œå³ä½¿åˆ—ä¸å­˜åœ¨ä¹Ÿä¸æŠ¥é”™ï¼ˆæœ€æ¨èï¼‰

```
python


å¤åˆ¶ç¼–è¾‘
data = data.drop(['time'], axis=1, errors='ignore')
```

è¿™æ ·å³ä½¿ `'time'` ä¸å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œä»£ç æ›´å¥å£®ã€‚

------

#### âœ… æ–¹æ³• 2ï¼šå…ˆåˆ¤æ–­åˆ—åæ˜¯å¦åœ¨ DataFrame ä¸­å†åˆ 

```
pythonå¤åˆ¶ç¼–è¾‘if 'time' in data.columns:
    data = data.drop(['time'], axis=1)
```

------

### ğŸ“Œ é™„å¸¦è¯´æ˜ï¼šä½ å‰é¢å¯èƒ½å·²ç»æ‰§è¡Œè¿‡ä¸€æ¬¡ `.drop(['time'])`ï¼Œæˆ–è€…å·²ç»åœ¨å…¶ä»–å•å…ƒæ ¼ä¸­åˆ è¿‡è¿™ä¸ªå­—æ®µï¼Œæ‰€ä»¥å†æ¬¡åˆ å°±æŠ¥é”™äº†ã€‚

------

### âœ… æœ€ç»ˆæ¨èä»£ç ï¼ˆç®€æ´å®‰å…¨ï¼‰ï¼š

```
pythonå¤åˆ¶ç¼–è¾‘# åˆ é™¤æ—¶é—´åˆ—ï¼Œå¦‚æœå·²ä¸å­˜åœ¨ä¹Ÿä¸æŠ¥é”™
data = data.drop(['time'], axis=1, errors='ignore')
```

------

éœ€è¦æˆ‘å¸®ä½ æ•´ç†æˆå®Œæ•´ä¸æŠ¥é”™çš„æ¸…æ´—ä¸ç‰¹å¾æå–ä»£ç å—ï¼Ÿå¯ä»¥ä¸€é”®è¿è¡Œä¸å‡ºé”™çš„ç‰ˆæœ¬ ğŸ‘ã€‚